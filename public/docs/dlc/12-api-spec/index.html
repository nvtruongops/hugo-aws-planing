<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="API Specification - Smart Cooking App#
API Overview#
Base Configuration#
API Name: Smart Cooking API
Base URL: https://api.smartcooking.app
Version: v1
Protocol: HTTPS only (TLS 1.2&#43;)
Format: JSON
Authentication: JWT Bearer Token (Cognito)API Gateway Configuration#
Type: REST API
Stage: prod
Endpoint Type: Regional
CORS: Enabled
  - Origins: [&#39;https://smartcooking.app&#39;, &#39;http://localhost:3000&#39;]
  - Methods: [&#39;GET&#39;, &#39;POST&#39;, &#39;PUT&#39;, &#39;DELETE&#39;, &#39;OPTIONS&#39;]
  - Headers: [&#39;Content-Type&#39;, &#39;Authorization&#39;, &#39;X-Request-ID&#39;]
  - Credentials: true

Throttling:
  Rate Limit: 1000 requests/second
  Burst Limit: 2000 requests

Timeout: 29 seconds (API Gateway max)Authentication#
Authentication Flow#
POST /auth/login
Content-Type: application/json

{
  &#34;email&#34;: &#34;user@example.com&#34;,
  &#34;password&#34;: &#34;SecurePass123&#34;
}

Response 200 OK:
{
  &#34;access_token&#34;: &#34;eyJraWQiOiJ...&#34;,
  &#34;refresh_token&#34;: &#34;eyJjdHkiOiJ...&#34;,
  &#34;id_token&#34;: &#34;eyJraWQiOiJ...&#34;,
  &#34;expires_in&#34;: 3600,
  &#34;token_type&#34;: &#34;Bearer&#34;
}Authenticated Requests#
GET /api/v1/user/profile
Authorization: Bearer eyJraWQiOiJ...
Content-Type: application/jsonAPI Endpoints#
1. Authentication &amp; User Management#
POST /auth/register#
Description: Register new user">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="https://example.org/docs/dlc/12-api-spec/">
  <meta property="og:site_name" content="Together">
  <meta property="og:title" content="12 - API Specification">
  <meta property="og:description" content="API Specification - Smart Cooking App#API Overview#Base Configuration#API Name: Smart Cooking API Base URL: https://api.smartcooking.app Version: v1 Protocol: HTTPS only (TLS 1.2&#43;) Format: JSON Authentication: JWT Bearer Token (Cognito)API Gateway Configuration#Type: REST API Stage: prod Endpoint Type: Regional CORS: Enabled - Origins: [&#39;https://smartcooking.app&#39;, &#39;http://localhost:3000&#39;] - Methods: [&#39;GET&#39;, &#39;POST&#39;, &#39;PUT&#39;, &#39;DELETE&#39;, &#39;OPTIONS&#39;] - Headers: [&#39;Content-Type&#39;, &#39;Authorization&#39;, &#39;X-Request-ID&#39;] - Credentials: true Throttling: Rate Limit: 1000 requests/second Burst Limit: 2000 requests Timeout: 29 seconds (API Gateway max)Authentication#Authentication Flow#POST /auth/login Content-Type: application/json { &#34;email&#34;: &#34;user@example.com&#34;, &#34;password&#34;: &#34;SecurePass123&#34; } Response 200 OK: { &#34;access_token&#34;: &#34;eyJraWQiOiJ...&#34;, &#34;refresh_token&#34;: &#34;eyJjdHkiOiJ...&#34;, &#34;id_token&#34;: &#34;eyJraWQiOiJ...&#34;, &#34;expires_in&#34;: 3600, &#34;token_type&#34;: &#34;Bearer&#34; }Authenticated Requests#GET /api/v1/user/profile Authorization: Bearer eyJraWQiOiJ... Content-Type: application/jsonAPI Endpoints#1. Authentication &amp; User Management#POST /auth/register#Description: Register new user">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
<title>12 - API Specification | Together</title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="https://example.org/docs/dlc/12-api-spec/">
<link rel="stylesheet" href="/book.min.d124d6c76b11546b04023ef152f0ca77dd5bfd00e1638c75250d60e274cdc189.css" integrity="sha256-0STWx2sRVGsEAj7xUvDKd91b/QDhY4x1JQ1g4nTNwYk=" crossorigin="anonymous">


  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.a12a0edc5979b40b3a21762e87b6bf03e2526b9cde0291a4eb1be5a9403b30b3.js" integrity="sha256-oSoO3Fl5tAs6IXYuh7a/A&#43;JSa5zeApGk6xvlqUA7MLM=" crossorigin="anonymous"></script>

  
</head>
<body dir="ltr" class="book-kind-page book-type-docs">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    
<aside class="book-menu">
  <div class="book-menu-content">
    
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>Together</span>
  </a>
</h2>


<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>














  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/summary/" class="">
      Summary</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/summary/aws-services-diagram/" class="">
      AWS Services Architecture Diagram</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/summary/ai-agent-implementation/" class="">
      Kế Hoạch Triển Khai AI Agent</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/summary/database-diagram/" class="">
      Database Schema Diagram</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/summary/cost-analysis/" class="">
      Phân Tích Chi Phí</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dlc/" class="">
      AI DLC</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/dlc/00-overview/" class="">
      00 - Project Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dlc/01-requirements/" class="">
      01 - Requirements</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dlc/02-constraints/" class="">
      02 - Constraints</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dlc/10-architecture/" class="">
      10 - Architecture</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dlc/11-database/" class="">
      11 - Database Design</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dlc/12-api-spec/" class="active">
      12 - API Specification</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dlc/13-security/" class="">
      13 - Security</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dlc/14-ai-agent/" class="">
      14 - AI Agent Design</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dlc/20-backend/" class="">
      20 - Backend Implementation</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dlc/21-frontend/" class="">
      21 - Frontend Implementation</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dlc/22-devops/" class="">
      22 - DevOps &amp; Deployment</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dlc/23-tasks/" class="">
      23 - Implementation Tasks</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dlc/30-cost-analysis/" class="">
      30 - Cost Analysis</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dlc/31-scaling/" class="">
      31 - Scaling Strategy</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dlc/32-monitoring/" class="">
      32 - Monitoring &amp; Observability</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dlc/40-auth/" class="">
      40 - Authentication &amp; Authorization</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dlc/41-privacy/" class="">
      41 - Privacy &amp; Data Protection</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dlc/42-compliance/" class="">
      42 - Compliance &amp; Governance</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dlc/99-glossary/" class="">
      99 - Glossary</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dlc/99-references/" class="">
      99 - References</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>













</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>



  </div>
</aside>
 

    <div class="book-page">
      <header class="book-header hidden">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/icons/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>12 - API Specification</h3>

  <label for="toc-control">
    
    <img src="/icons/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#api-overview">API Overview</a>
      <ul>
        <li><a href="#base-configuration">Base Configuration</a></li>
        <li><a href="#api-gateway-configuration">API Gateway Configuration</a></li>
      </ul>
    </li>
    <li><a href="#authentication">Authentication</a>
      <ul>
        <li><a href="#authentication-flow">Authentication Flow</a></li>
        <li><a href="#authenticated-requests">Authenticated Requests</a></li>
      </ul>
    </li>
    <li><a href="#api-endpoints">API Endpoints</a>
      <ul>
        <li><a href="#1-authentication--user-management">1. Authentication &amp; User Management</a></li>
        <li><a href="#2-ingredient-management">2. Ingredient Management</a></li>
        <li><a href="#3-ai-recipe-suggestions">3. AI Recipe Suggestions</a></li>
        <li><a href="#4-cooking-history--rating">4. Cooking History &amp; Rating</a></li>
        <li><a href="#5-recipe-management">5. Recipe Management</a></li>
        <li><a href="#6-privacy-settings">6. Privacy Settings</a></li>
        <li><a href="#7-social---friends">7. Social - Friends</a></li>
        <li><a href="#8-social---posts--comments">8. Social - Posts &amp; Comments</a></li>
        <li><a href="#9-notifications">9. Notifications</a></li>
        <li><a href="#10-admin-operations">10. Admin Operations</a></li>
      </ul>
    </li>
    <li><a href="#response-codes">Response Codes</a>
      <ul>
        <li><a href="#success-codes">Success Codes</a></li>
        <li><a href="#client-error-codes">Client Error Codes</a></li>
        <li><a href="#server-error-codes">Server Error Codes</a></li>
      </ul>
    </li>
    <li><a href="#error-response-format">Error Response Format</a></li>
    <li><a href="#rate-limiting">Rate Limiting</a></li>
    <li><a href="#related-documents">Related Documents</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown book-article"><h1 id="api-specification---smart-cooking-app">API Specification - Smart Cooking App<a class="anchor" href="#api-specification---smart-cooking-app">#</a></h1>
<h2 id="api-overview">API Overview<a class="anchor" href="#api-overview">#</a></h2>
<h3 id="base-configuration">Base Configuration<a class="anchor" href="#base-configuration">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">API Name</span>: <span style="color:#ae81ff">Smart Cooking API</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Base URL</span>: <span style="color:#ae81ff">https://api.smartcooking.app</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Version</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Protocol</span>: <span style="color:#ae81ff">HTTPS only (TLS 1.2+)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Format</span>: <span style="color:#ae81ff">JSON</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Authentication</span>: <span style="color:#ae81ff">JWT Bearer Token (Cognito)</span></span></span></code></pre></div><h3 id="api-gateway-configuration">API Gateway Configuration<a class="anchor" href="#api-gateway-configuration">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">Type</span>: <span style="color:#ae81ff">REST API</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Stage</span>: <span style="color:#ae81ff">prod</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Endpoint Type</span>: <span style="color:#ae81ff">Regional</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">CORS</span>: <span style="color:#ae81ff">Enabled</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">Origins</span>: [<span style="color:#e6db74">&#39;https://smartcooking.app&#39;</span>, <span style="color:#e6db74">&#39;http://localhost:3000&#39;</span>]
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">Methods</span>: [<span style="color:#e6db74">&#39;GET&#39;</span>, <span style="color:#e6db74">&#39;POST&#39;</span>, <span style="color:#e6db74">&#39;PUT&#39;</span>, <span style="color:#e6db74">&#39;DELETE&#39;</span>, <span style="color:#e6db74">&#39;OPTIONS&#39;</span>]
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">Headers</span>: [<span style="color:#e6db74">&#39;Content-Type&#39;</span>, <span style="color:#e6db74">&#39;Authorization&#39;</span>, <span style="color:#e6db74">&#39;X-Request-ID&#39;</span>]
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">Credentials</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Throttling</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Rate Limit</span>: <span style="color:#ae81ff">1000</span> <span style="color:#ae81ff">requests/second</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Burst Limit</span>: <span style="color:#ae81ff">2000</span> <span style="color:#ae81ff">requests</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Timeout</span>: <span style="color:#ae81ff">29</span> <span style="color:#ae81ff">seconds (API Gateway max)</span></span></span></code></pre></div><h2 id="authentication">Authentication<a class="anchor" href="#authentication">#</a></h2>
<h3 id="authentication-flow">Authentication Flow<a class="anchor" href="#authentication-flow">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-http" data-lang="http"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">POST /auth/login
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">Content-Type: application/json
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">{
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">  &#34;email&#34;: &#34;user@example.com&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">  &#34;password&#34;: &#34;SecurePass123&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">}
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">Response 200 OK:
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">{
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">  &#34;access_token&#34;: &#34;eyJraWQiOiJ...&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">  &#34;refresh_token&#34;: &#34;eyJjdHkiOiJ...&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">  &#34;id_token&#34;: &#34;eyJraWQiOiJ...&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">  &#34;expires_in&#34;: 3600,
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">  &#34;token_type&#34;: &#34;Bearer&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">}</span></span></span></code></pre></div><h3 id="authenticated-requests">Authenticated Requests<a class="anchor" href="#authenticated-requests">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-http" data-lang="http"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">GET /api/v1/user/profile
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">Authorization: Bearer eyJraWQiOiJ...
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">Content-Type: application/json</span></span></span></code></pre></div><h2 id="api-endpoints">API Endpoints<a class="anchor" href="#api-endpoints">#</a></h2>
<h3 id="1-authentication--user-management">1. Authentication &amp; User Management<a class="anchor" href="#1-authentication--user-management">#</a></h3>
<h4 id="post-authregister">POST /auth/register<a class="anchor" href="#post-authregister">#</a></h4>
<p><strong>Description</strong>: Register new user</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;user@example.com&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;password&#34;</span>: <span style="color:#e6db74">&#34;SecurePass123&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;username&#34;</span>: <span style="color:#e6db74">&#34;cookmaster&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;full_name&#34;</span>: <span style="color:#e6db74">&#34;John Doe&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Response 201 Created:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;user_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-123&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;user@example.com&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;username&#34;</span>: <span style="color:#e6db74">&#34;cookmaster&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Verification email sent&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Errors:</strong></p>
<ul>
<li>400: Invalid email format, weak password</li>
<li>409: Email or username already exists</li>
</ul>
<hr>
<h4 id="post-authlogin">POST /auth/login<a class="anchor" href="#post-authlogin">#</a></h4>
<p><strong>Description</strong>: Login user</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;user@example.com&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;password&#34;</span>: <span style="color:#e6db74">&#34;SecurePass123&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;access_token&#34;</span>: <span style="color:#e6db74">&#34;eyJraWQiOiJ...&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;refresh_token&#34;</span>: <span style="color:#e6db74">&#34;eyJjdHkiOiJ...&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;expires_in&#34;</span>: <span style="color:#ae81ff">3600</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;user&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;user_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-123&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;user@example.com&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;username&#34;</span>: <span style="color:#e6db74">&#34;cookmaster&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;role&#34;</span>: <span style="color:#e6db74">&#34;user&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Errors:</strong></p>
<ul>
<li>401: Invalid credentials</li>
<li>403: Account not verified</li>
</ul>
<hr>
<h4 id="get-userprofile">GET /user/profile<a class="anchor" href="#get-userprofile">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;user_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-123&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;user@example.com&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;username&#34;</span>: <span style="color:#e6db74">&#34;cookmaster&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;full_name&#34;</span>: <span style="color:#e6db74">&#34;John Doe&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;date_of_birth&#34;</span>: <span style="color:#e6db74">&#34;1990-01-15&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;gender&#34;</span>: <span style="color:#e6db74">&#34;male&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;country&#34;</span>: <span style="color:#e6db74">&#34;Vietnam&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;avatar_url&#34;</span>: <span style="color:#e6db74">&#34;https://s3.../avatar.jpg&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;role&#34;</span>: <span style="color:#e6db74">&#34;user&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;created_at&#34;</span>: <span style="color:#e6db74">&#34;2025-01-15T10:00:00Z&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="put-userprofile">PUT /user/profile<a class="anchor" href="#put-userprofile">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;full_name&#34;</span>: <span style="color:#e6db74">&#34;John Smith&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;date_of_birth&#34;</span>: <span style="color:#e6db74">&#34;1990-01-15&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;gender&#34;</span>: <span style="color:#e6db74">&#34;male&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;country&#34;</span>: <span style="color:#e6db74">&#34;Vietnam&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;avatar_url&#34;</span>: <span style="color:#e6db74">&#34;https://s3.../new-avatar.jpg&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Profile updated successfully&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;user&#34;</span>: { <span style="color:#960050;background-color:#1e0010">/*</span> <span style="color:#960050;background-color:#1e0010">updated</span> <span style="color:#960050;background-color:#1e0010">user</span> <span style="color:#960050;background-color:#1e0010">object</span> <span style="color:#960050;background-color:#1e0010">*/</span> }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="put-userpreferences">PUT /user/preferences<a class="anchor" href="#put-userpreferences">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;dietary_restrictions&#34;</span>: [<span style="color:#e6db74">&#34;vegetarian&#34;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;allergies&#34;</span>: [<span style="color:#e6db74">&#34;shrimp&#34;</span>, <span style="color:#e6db74">&#34;crab&#34;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;favorite_cuisines&#34;</span>: [<span style="color:#e6db74">&#34;Vietnamese&#34;</span>, <span style="color:#e6db74">&#34;Italian&#34;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;preferred_cooking_methods&#34;</span>: [<span style="color:#e6db74">&#34;stir-fry&#34;</span>, <span style="color:#e6db74">&#34;steam&#34;</span>, <span style="color:#e6db74">&#34;soup&#34;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;preferred_recipe_count&#34;</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;spice_level&#34;</span>: <span style="color:#e6db74">&#34;medium&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Preferences updated&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;preferences&#34;</span>: { <span style="color:#960050;background-color:#1e0010">/*</span> <span style="color:#960050;background-color:#1e0010">updated</span> <span style="color:#960050;background-color:#1e0010">preferences</span> <span style="color:#960050;background-color:#1e0010">*/</span> }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h3 id="2-ingredient-management">2. Ingredient Management<a class="anchor" href="#2-ingredient-management">#</a></h3>
<h4 id="get-useringredients">GET /user/ingredients<a class="anchor" href="#get-useringredients">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;ingredients&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;ingredient_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-456&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;ingredient_name&#34;</span>: <span style="color:#e6db74">&#34;Thịt gà&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;normalized_name&#34;</span>: <span style="color:#e6db74">&#34;thit ga&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;added_at&#34;</span>: <span style="color:#e6db74">&#34;2025-01-20T09:00:00Z&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;ingredient_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-457&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;ingredient_name&#34;</span>: <span style="color:#e6db74">&#34;Cà chua&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;normalized_name&#34;</span>: <span style="color:#e6db74">&#34;ca chua&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;added_at&#34;</span>: <span style="color:#e6db74">&#34;2025-01-20T09:05:00Z&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;count&#34;</span>: <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="post-useringredients">POST /user/ingredients<a class="anchor" href="#post-useringredients">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;ingredient_name&#34;</span>: <span style="color:#e6db74">&#34;Thịt gà&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Response 201 Created:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;ingredient_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-456&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;ingredient_name&#34;</span>: <span style="color:#e6db74">&#34;Thịt gà&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;normalized_name&#34;</span>: <span style="color:#e6db74">&#34;thit ga&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;added_at&#34;</span>: <span style="color:#e6db74">&#34;2025-01-20T09:00:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Ingredient added&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Response 200 OK (Auto-corrected):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;ingredient_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-456&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;ingredient_name&#34;</span>: <span style="color:#e6db74">&#34;Thịt gà&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;original_input&#34;</span>: <span style="color:#e6db74">&#34;thit ga&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;corrected&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;confidence&#34;</span>: <span style="color:#ae81ff">0.85</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Ingredient auto-corrected and added&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Errors:</strong></p>
<ul>
<li>400: Invalid ingredient with suggestions</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;error&#34;</span>: <span style="color:#e6db74">&#34;ingredient_not_found&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Không tìm thấy nguyên liệu: abc xyz&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;suggestions&#34;</span>: [<span style="color:#e6db74">&#34;gà&#34;</span>, <span style="color:#e6db74">&#34;cá&#34;</span>, <span style="color:#e6db74">&#34;bò&#34;</span>, <span style="color:#e6db74">&#34;tôm&#34;</span>]
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="delete-useringredientsingredient_id">DELETE /user/ingredients/{ingredient_id}<a class="anchor" href="#delete-useringredientsingredient_id">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Ingredient removed&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="post-ingredientsvalidate">POST /ingredients/validate<a class="anchor" href="#post-ingredientsvalidate">#</a></h4>
<p><strong>Auth</strong>: Required
<strong>Description</strong>: Validate multiple ingredients at once</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;ingredients&#34;</span>: [<span style="color:#e6db74">&#34;thịt gà&#34;</span>, <span style="color:#e6db74">&#34;abc xyz&#34;</span>, <span style="color:#e6db74">&#34;thit ca&#34;</span>]
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;valid&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;ingredient_name&#34;</span>: <span style="color:#e6db74">&#34;Thịt gà&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;normalized_name&#34;</span>: <span style="color:#e6db74">&#34;thit ga&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;invalid&#34;</span>: [<span style="color:#e6db74">&#34;abc xyz&#34;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;corrected&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;original&#34;</span>: <span style="color:#e6db74">&#34;thit ca&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;matched&#34;</span>: <span style="color:#e6db74">&#34;Thịt cá&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;confidence&#34;</span>: <span style="color:#ae81ff">0.9</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;suggestions&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;original&#34;</span>: <span style="color:#e6db74">&#34;abc xyz&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;similar&#34;</span>: [<span style="color:#e6db74">&#34;gà&#34;</span>, <span style="color:#e6db74">&#34;cá&#34;</span>, <span style="color:#e6db74">&#34;bò&#34;</span>, <span style="color:#e6db74">&#34;tôm&#34;</span>, <span style="color:#e6db74">&#34;mực&#34;</span>]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="get-ingredientssearch">GET /ingredients/search<a class="anchor" href="#get-ingredientssearch">#</a></h4>
<p><strong>Auth</strong>: Required
<strong>Description</strong>: Search master ingredients</p>
<p><strong>Query Params:</strong></p>
<ul>
<li><code>q</code>: Search term (required)</li>
<li><code>category</code>: Filter by category (optional)</li>
<li><code>limit</code>: Max results (default: 20)</li>
</ul>
<p><strong>Example:</strong></p>
<pre tabindex="0"><code>GET /ingredients/search?q=ga&amp;category=meat&amp;limit=10</code></pre><p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;results&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;ingredient_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-789&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;Thịt gà&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;normalized_name&#34;</span>: <span style="color:#e6db74">&#34;thit ga&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;category&#34;</span>: <span style="color:#e6db74">&#34;meat&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;aliases&#34;</span>: [<span style="color:#e6db74">&#34;gà&#34;</span>, <span style="color:#e6db74">&#34;chicken&#34;</span>]
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;ingredient_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-790&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;Gà ta&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;normalized_name&#34;</span>: <span style="color:#e6db74">&#34;ga ta&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;category&#34;</span>: <span style="color:#e6db74">&#34;meat&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;aliases&#34;</span>: [<span style="color:#e6db74">&#34;gà đồi&#34;</span>, <span style="color:#e6db74">&#34;gà nhà&#34;</span>]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;count&#34;</span>: <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h3 id="3-ai-recipe-suggestions">3. AI Recipe Suggestions<a class="anchor" href="#3-ai-recipe-suggestions">#</a></h3>
<h4 id="post-aisuggest">POST /ai/suggest<a class="anchor" href="#post-aisuggest">#</a></h4>
<p><strong>Auth</strong>: Required
<strong>Timeout</strong>: 60 seconds</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;ingredients&#34;</span>: [<span style="color:#e6db74">&#34;thịt gà&#34;</span>, <span style="color:#e6db74">&#34;cà chua&#34;</span>, <span style="color:#e6db74">&#34;hành tây&#34;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;recipe_count&#34;</span>: <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Response 200 OK (Flexible Mix):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;suggestions&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;recipe-001&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;Gà xào cà chua&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;source&#34;</span>: <span style="color:#e6db74">&#34;database&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;cooking_method&#34;</span>: <span style="color:#e6db74">&#34;stir-fry&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;meal_type&#34;</span>: <span style="color:#e6db74">&#34;main&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;cuisine_type&#34;</span>: <span style="color:#e6db74">&#34;Vietnamese&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;prep_time_minutes&#34;</span>: <span style="color:#ae81ff">15</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;cook_time_minutes&#34;</span>: <span style="color:#ae81ff">20</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;servings&#34;</span>: <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;difficulty&#34;</span>: <span style="color:#e6db74">&#34;easy&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;match_score&#34;</span>: <span style="color:#ae81ff">0.95</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;is_approved&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;average_rating&#34;</span>: <span style="color:#ae81ff">4.5</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;rating_count&#34;</span>: <span style="color:#ae81ff">12</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;ingredients&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;ingredient_name&#34;</span>: <span style="color:#e6db74">&#34;Thịt gà&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;quantity&#34;</span>: <span style="color:#e6db74">&#34;300g&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;preparation&#34;</span>: <span style="color:#e6db74">&#34;Cắt miếng vừa&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;instructions&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;step_number&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Ướp gà với gia vị&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;duration&#34;</span>: <span style="color:#e6db74">&#34;10 phút&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;nutritional_info&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;calories&#34;</span>: <span style="color:#ae81ff">350</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;protein&#34;</span>: <span style="color:#e6db74">&#34;30g&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;carbs&#34;</span>: <span style="color:#e6db74">&#34;20g&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;fat&#34;</span>: <span style="color:#e6db74">&#34;15g&#34;</span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;recipe-002&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;Canh cà chua&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;source&#34;</span>: <span style="color:#e6db74">&#34;database&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;cooking_method&#34;</span>: <span style="color:#e6db74">&#34;soup&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;meal_type&#34;</span>: <span style="color:#e6db74">&#34;soup&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;match_score&#34;</span>: <span style="color:#ae81ff">0.80</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;is_approved&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;average_rating&#34;</span>: <span style="color:#ae81ff">4.2</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;ai-gen-001&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;Gà hấp cà chua hành&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;source&#34;</span>: <span style="color:#e6db74">&#34;ai&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;cooking_method&#34;</span>: <span style="color:#e6db74">&#34;steam&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;meal_type&#34;</span>: <span style="color:#e6db74">&#34;main&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;is_new&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;is_approved&#34;</span>: <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;ingredients&#34;</span>: [<span style="color:#960050;background-color:#1e0010">...</span>],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;instructions&#34;</span>: [<span style="color:#960050;background-color:#1e0010">...</span>],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;note&#34;</span>: <span style="color:#e6db74">&#34;Recipe created by AI - Try it and rate!&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;stats&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;requested&#34;</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;from_database&#34;</span>: <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;from_ai&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;processing_time_ms&#34;</span>: <span style="color:#ae81ff">3500</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;warnings&#34;</span>: []
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Response 200 OK (With Warnings):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;suggestions&#34;</span>: [<span style="color:#960050;background-color:#1e0010">...</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;stats&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;requested&#34;</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;from_database&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;from_ai&#34;</span>: <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;warnings&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;ingredient&#34;</span>: <span style="color:#e6db74">&#34;abc xyz&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Nguyên liệu không hợp lệ, AI cố gắng xử lý&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;suggestions&#34;</span>: [<span style="color:#e6db74">&#34;gà&#34;</span>, <span style="color:#e6db74">&#34;cá&#34;</span>, <span style="color:#e6db74">&#34;bò&#34;</span>],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;reported&#34;</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Errors:</strong></p>
<ul>
<li>400: All ingredients invalid</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;error&#34;</span>: <span style="color:#e6db74">&#34;all_ingredients_invalid&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Tất cả nguyên liệu không hợp lệ&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;invalid_ingredients&#34;</span>: [<span style="color:#e6db74">&#34;abc&#34;</span>, <span style="color:#e6db74">&#34;xyz&#34;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;suggestions&#34;</span>: [
</span></span><span style="display:flex;"><span>    { <span style="color:#f92672">&#34;original&#34;</span>: <span style="color:#e6db74">&#34;abc&#34;</span>, <span style="color:#f92672">&#34;similar&#34;</span>: [<span style="color:#e6db74">&#34;cá&#34;</span>, <span style="color:#e6db74">&#34;gà&#34;</span>] }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><ul>
<li>400: Too few ingredients</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;error&#34;</span>: <span style="color:#e6db74">&#34;insufficient_ingredients&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Cần ít nhất 2 nguyên liệu&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><ul>
<li>403: Rate limit exceeded (free tier)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;error&#34;</span>: <span style="color:#e6db74">&#34;rate_limit_exceeded&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Bạn đã hết lượt gợi ý. Nâng cấp Premium?&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;limit&#34;</span>: <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;used&#34;</span>: <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;reset_at&#34;</span>: <span style="color:#e6db74">&#34;2025-02-01T00:00:00Z&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="get-aisuggestions">GET /ai/suggestions<a class="anchor" href="#get-aisuggestions">#</a></h4>
<p><strong>Auth</strong>: Required
<strong>Description</strong>: Get user&rsquo;s suggestion history</p>
<p><strong>Query Params:</strong></p>
<ul>
<li><code>limit</code>: Max results (default: 20)</li>
<li><code>offset</code>: Pagination offset</li>
</ul>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;suggestions&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;suggestion_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-303&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;ingredients_used&#34;</span>: [<span style="color:#e6db74">&#34;thịt gà&#34;</span>, <span style="color:#e6db74">&#34;cà chua&#34;</span>],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;requested_recipe_count&#34;</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;recipes_from_db&#34;</span>: <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;recipes_from_ai&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;was_accepted&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;feedback_rating&#34;</span>: <span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;created_at&#34;</span>: <span style="color:#e6db74">&#34;2025-01-20T10:00:00Z&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;count&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;has_more&#34;</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="post-aifeedback">POST /ai/feedback<a class="anchor" href="#post-aifeedback">#</a></h4>
<p><strong>Auth</strong>: Required
<strong>Description</strong>: Provide feedback on AI suggestion</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;suggestion_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-303&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;was_accepted&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;feedback_rating&#34;</span>: <span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;feedback_comment&#34;</span>: <span style="color:#e6db74">&#34;Gợi ý rất hay!&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Feedback saved. Thank you!&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h3 id="4-cooking-history--rating">4. Cooking History &amp; Rating<a class="anchor" href="#4-cooking-history--rating">#</a></h3>
<h4 id="post-cookingstart">POST /cooking/start<a class="anchor" href="#post-cookingstart">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;recipe_id&#34;</span>: <span style="color:#e6db74">&#34;recipe-001&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;suggestion_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-303&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Response 201 Created:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;history_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-202&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;recipe_id&#34;</span>: <span style="color:#e6db74">&#34;recipe-001&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;cooking&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;created_at&#34;</span>: <span style="color:#e6db74">&#34;2025-01-20T15:30:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Bắt đầu nấu ăn!&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="put-cookinghistory_idcomplete">PUT /cooking/{history_id}/complete<a class="anchor" href="#put-cookinghistory_idcomplete">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;history_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-202&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;completed&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;cook_date&#34;</span>: <span style="color:#e6db74">&#34;2025-01-20T18:00:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Hoàn thành! Vui lòng đánh giá món ăn.&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;show_rating_form&#34;</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="get-usercooking-history">GET /user/cooking-history<a class="anchor" href="#get-usercooking-history">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Query Params:</strong></p>
<ul>
<li><code>limit</code>: Max results (default: 20)</li>
<li><code>offset</code>: Pagination</li>
<li><code>favorites</code>: true/false (filter favorites only)</li>
<li><code>status</code>: cooking/completed/failed</li>
</ul>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;history&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;history_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-202&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;recipe_id&#34;</span>: <span style="color:#e6db74">&#34;recipe-001&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;recipe_name&#34;</span>: <span style="color:#e6db74">&#34;Gà xào cà chua&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;completed&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;personal_rating&#34;</span>: <span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;personal_notes&#34;</span>: <span style="color:#e6db74">&#34;Rất ngon!&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;is_favorite&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;cook_date&#34;</span>: <span style="color:#e6db74">&#34;2025-01-20T18:00:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;created_at&#34;</span>: <span style="color:#e6db74">&#34;2025-01-20T15:30:00Z&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;count&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;has_more&#34;</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="delete-cookinghistory_id">DELETE /cooking/{history_id}<a class="anchor" href="#delete-cookinghistory_id">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Cooking history deleted&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="put-cookinghistory_idfavorite">PUT /cooking/{history_id}/favorite<a class="anchor" href="#put-cookinghistory_idfavorite">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;is_favorite&#34;</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Added to favorites&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="post-recipesrecipe_idrate">POST /recipes/{recipe_id}/rate<a class="anchor" href="#post-recipesrecipe_idrate">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;rating&#34;</span>: <span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;comment&#34;</span>: <span style="color:#e6db74">&#34;Món này rất ngon!&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;history_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-202&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Response 200 OK (Auto-approved):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;success&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;rating_saved&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;average_rating&#34;</span>: <span style="color:#ae81ff">4.2</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;rating_count&#34;</span>: <span style="color:#ae81ff">13</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;auto_approved&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Công thức đã được thêm vào database!&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;recipe&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;recipe-001&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;is_approved&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;is_public&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;approval_type&#34;</span>: <span style="color:#e6db74">&#34;auto_rating&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Response 200 OK (Not approved):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;success&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;rating_saved&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;average_rating&#34;</span>: <span style="color:#ae81ff">3.5</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;rating_count&#34;</span>: <span style="color:#ae81ff">8</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;auto_approved&#34;</span>: <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Cảm ơn đánh giá của bạn!&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Errors:</strong></p>
<ul>
<li>400: Invalid rating (must be 1-5)</li>
<li>409: Already rated this recipe</li>
</ul>
<hr>
<h3 id="5-recipe-management">5. Recipe Management<a class="anchor" href="#5-recipe-management">#</a></h3>
<h4 id="get-recipesrecipe_id">GET /recipes/{recipe_id}<a class="anchor" href="#get-recipesrecipe_id">#</a></h4>
<p><strong>Auth</strong>: Optional (required for private recipes)</p>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;recipe_id&#34;</span>: <span style="color:#e6db74">&#34;recipe-001&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Gà xào cà chua&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Món gà xào thơm ngon...&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;cuisine_type&#34;</span>: <span style="color:#e6db74">&#34;Vietnamese&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;cooking_method&#34;</span>: <span style="color:#e6db74">&#34;stir-fry&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;meal_type&#34;</span>: <span style="color:#e6db74">&#34;main&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;prep_time_minutes&#34;</span>: <span style="color:#ae81ff">15</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;cook_time_minutes&#34;</span>: <span style="color:#ae81ff">20</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;servings&#34;</span>: <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;difficulty&#34;</span>: <span style="color:#e6db74">&#34;easy&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;calories_per_serving&#34;</span>: <span style="color:#ae81ff">350</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;ingredients&#34;</span>: [<span style="color:#960050;background-color:#1e0010">...</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;instructions&#34;</span>: [<span style="color:#960050;background-color:#1e0010">...</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;nutritional_info&#34;</span>: {<span style="color:#960050;background-color:#1e0010">...</span>},
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;is_public&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;is_ai_generated&#34;</span>: <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;is_approved&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;average_rating&#34;</span>: <span style="color:#ae81ff">4.5</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;rating_count&#34;</span>: <span style="color:#ae81ff">12</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;created_by&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;user_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-123&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;username&#34;</span>: <span style="color:#e6db74">&#34;cookmaster&#34;</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;created_at&#34;</span>: <span style="color:#e6db74">&#34;2025-01-15T10:00:00Z&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Errors:</strong></p>
<ul>
<li>404: Recipe not found</li>
<li>403: Recipe is private</li>
</ul>
<hr>
<h4 id="get-recipessearch">GET /recipes/search<a class="anchor" href="#get-recipessearch">#</a></h4>
<p><strong>Auth</strong>: Optional</p>
<p><strong>Query Params:</strong></p>
<ul>
<li><code>q</code>: Search query (optional)</li>
<li><code>cuisine_type</code>: Vietnamese/Italian/&hellip; (optional)</li>
<li><code>cooking_method</code>: stir-fry/steam/soup/&hellip; (optional)</li>
<li><code>meal_type</code>: main/side/soup/&hellip; (optional)</li>
<li><code>min_rating</code>: Minimum rating (optional)</li>
<li><code>sort</code>: rating/created_at/popularity (default: rating)</li>
<li><code>limit</code>: Max results (default: 20)</li>
<li><code>offset</code>: Pagination</li>
</ul>
<p><strong>Example:</strong></p>
<pre tabindex="0"><code>GET /recipes/search?cuisine_type=Vietnamese&amp;cooking_method=stir-fry&amp;min_rating=4&amp;sort=rating&amp;limit=10</code></pre><p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;recipes&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;recipe_id&#34;</span>: <span style="color:#e6db74">&#34;recipe-001&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Gà xào cà chua&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;cuisine_type&#34;</span>: <span style="color:#e6db74">&#34;Vietnamese&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;cooking_method&#34;</span>: <span style="color:#e6db74">&#34;stir-fry&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;average_rating&#34;</span>: <span style="color:#ae81ff">4.5</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;rating_count&#34;</span>: <span style="color:#ae81ff">12</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;prep_time_minutes&#34;</span>: <span style="color:#ae81ff">15</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;image_url&#34;</span>: <span style="color:#e6db74">&#34;https://s3.../recipe-001.jpg&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;count&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;has_more&#34;</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="post-recipes">POST /recipes<a class="anchor" href="#post-recipes">#</a></h4>
<p><strong>Auth</strong>: Required
<strong>Description</strong>: Create custom recipe (not from AI)</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Món của tôi&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Công thức tự tạo&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;cuisine_type&#34;</span>: <span style="color:#e6db74">&#34;Vietnamese&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;cooking_method&#34;</span>: <span style="color:#e6db74">&#34;stir-fry&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;meal_type&#34;</span>: <span style="color:#e6db74">&#34;main&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;ingredients&#34;</span>: [<span style="color:#960050;background-color:#1e0010">...</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;instructions&#34;</span>: [<span style="color:#960050;background-color:#1e0010">...</span>]
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Response 201 Created:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;recipe_id&#34;</span>: <span style="color:#e6db74">&#34;recipe-999&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Recipe created. It will be public after approval.&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;is_approved&#34;</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="put-recipesrecipe_id">PUT /recipes/{recipe_id}<a class="anchor" href="#put-recipesrecipe_id">#</a></h4>
<p><strong>Auth</strong>: Required (own recipes only)</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Updated title&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Updated description&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Recipe updated&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;recipe&#34;</span>: {<span style="color:#960050;background-color:#1e0010">...</span>}
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="delete-recipesrecipe_id">DELETE /recipes/{recipe_id}<a class="anchor" href="#delete-recipesrecipe_id">#</a></h4>
<p><strong>Auth</strong>: Required (own recipes or admin)</p>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Recipe deleted&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h3 id="6-privacy-settings">6. Privacy Settings<a class="anchor" href="#6-privacy-settings">#</a></h3>
<h4 id="get-userprivacy">GET /user/privacy<a class="anchor" href="#get-userprivacy">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;profile_visibility&#34;</span>: <span style="color:#e6db74">&#34;public&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;email_visibility&#34;</span>: <span style="color:#e6db74">&#34;private&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;date_of_birth_visibility&#34;</span>: <span style="color:#e6db74">&#34;friends&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;gender_visibility&#34;</span>: <span style="color:#e6db74">&#34;public&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;country_visibility&#34;</span>: <span style="color:#e6db74">&#34;public&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;recipes_visibility&#34;</span>: <span style="color:#e6db74">&#34;public&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;ingredients_visibility&#34;</span>: <span style="color:#e6db74">&#34;friends&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;preferences_visibility&#34;</span>: <span style="color:#e6db74">&#34;friends&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="put-userprivacy">PUT /user/privacy<a class="anchor" href="#put-userprivacy">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;profile_visibility&#34;</span>: <span style="color:#e6db74">&#34;friends&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;ingredients_visibility&#34;</span>: <span style="color:#e6db74">&#34;private&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Privacy settings updated&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;settings&#34;</span>: {<span style="color:#960050;background-color:#1e0010">...</span>}
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h3 id="7-social---friends">7. Social - Friends<a class="anchor" href="#7-social---friends">#</a></h3>
<h4 id="post-friendsrequest">POST /friends/request<a class="anchor" href="#post-friendsrequest">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;friend_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-456&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Response 201 Created:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;friendship_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-505&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;pending&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Friend request sent&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="get-friends">GET /friends<a class="anchor" href="#get-friends">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Query Params:</strong></p>
<ul>
<li><code>status</code>: pending/accepted/blocked</li>
</ul>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;friends&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;friendship_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-505&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;friend_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-456&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;username&#34;</span>: <span style="color:#e6db74">&#34;friend1&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;full_name&#34;</span>: <span style="color:#e6db74">&#34;Friend One&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;avatar_url&#34;</span>: <span style="color:#e6db74">&#34;https://s3.../avatar.jpg&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;accepted&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;requested_at&#34;</span>: <span style="color:#e6db74">&#34;2025-01-18T10:00:00Z&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;count&#34;</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="put-friendsfriendship_idaccept">PUT /friends/{friendship_id}/accept<a class="anchor" href="#put-friendsfriendship_idaccept">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Friend request accepted&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;friendship&#34;</span>: {<span style="color:#960050;background-color:#1e0010">...</span>}
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="put-friendsfriendship_idreject">PUT /friends/{friendship_id}/reject<a class="anchor" href="#put-friendsfriendship_idreject">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Friend request rejected&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="delete-friendsfriendship_id">DELETE /friends/{friendship_id}<a class="anchor" href="#delete-friendsfriendship_id">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Friendship removed&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h3 id="8-social---posts--comments">8. Social - Posts &amp; Comments<a class="anchor" href="#8-social---posts--comments">#</a></h3>
<h4 id="post-posts">POST /posts<a class="anchor" href="#post-posts">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;Vừa nấu món này, rất ngon!&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;recipe_id&#34;</span>: <span style="color:#e6db74">&#34;recipe-001&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;images&#34;</span>: [<span style="color:#e6db74">&#34;https://s3.../post1.jpg&#34;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;is_public&#34;</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Response 201 Created:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;post_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-606&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Post created&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="get-postsfeed">GET /posts/feed<a class="anchor" href="#get-postsfeed">#</a></h4>
<p><strong>Auth</strong>: Required
<strong>Description</strong>: Get personalized feed (friends&rsquo; posts)</p>
<p><strong>Query Params:</strong></p>
<ul>
<li><code>limit</code>: Max results (default: 20)</li>
<li><code>offset</code>: Pagination</li>
</ul>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;posts&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;post_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-606&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;user_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-456&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;username&#34;</span>: <span style="color:#e6db74">&#34;friend1&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;user_avatar&#34;</span>: <span style="color:#e6db74">&#34;https://s3.../avatar.jpg&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;Vừa nấu món này!&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;recipe_id&#34;</span>: <span style="color:#e6db74">&#34;recipe-001&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;recipe_name&#34;</span>: <span style="color:#e6db74">&#34;Gà xào cà chua&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;images&#34;</span>: [<span style="color:#e6db74">&#34;https://s3.../post1.jpg&#34;</span>],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;likes_count&#34;</span>: <span style="color:#ae81ff">15</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;comments_count&#34;</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;user_has_liked&#34;</span>: <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;created_at&#34;</span>: <span style="color:#e6db74">&#34;2025-01-20T20:00:00Z&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;has_more&#34;</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="get-postspost_id">GET /posts/{post_id}<a class="anchor" href="#get-postspost_id">#</a></h4>
<p><strong>Auth</strong>: Optional</p>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;post_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-606&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;user&#34;</span>: {<span style="color:#960050;background-color:#1e0010">...</span>},
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;...&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;recipe&#34;</span>: {<span style="color:#960050;background-color:#1e0010">...</span>},
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;images&#34;</span>: [<span style="color:#960050;background-color:#1e0010">...</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;likes_count&#34;</span>: <span style="color:#ae81ff">15</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;comments_count&#34;</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;created_at&#34;</span>: <span style="color:#e6db74">&#34;2025-01-20T20:00:00Z&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="put-postspost_id">PUT /posts/{post_id}<a class="anchor" href="#put-postspost_id">#</a></h4>
<p><strong>Auth</strong>: Required (own posts only)</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;Updated content&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Post updated&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="delete-postspost_id">DELETE /posts/{post_id}<a class="anchor" href="#delete-postspost_id">#</a></h4>
<p><strong>Auth</strong>: Required (own posts or admin)</p>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Post deleted&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="post-postspost_idcomments">POST /posts/{post_id}/comments<a class="anchor" href="#post-postspost_idcomments">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;Trông rất ngon!&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;parent_comment_id&#34;</span>: <span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Response 201 Created:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;comment_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-707&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Comment added&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="get-postspost_idcomments">GET /posts/{post_id}/comments<a class="anchor" href="#get-postspost_idcomments">#</a></h4>
<p><strong>Auth</strong>: Optional</p>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;comments&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;comment_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-707&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;user_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-456&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;username&#34;</span>: <span style="color:#e6db74">&#34;commenter&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;user_avatar&#34;</span>: <span style="color:#e6db74">&#34;https://s3.../avatar.jpg&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;Trông rất ngon!&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;parent_comment_id&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;created_at&#34;</span>: <span style="color:#e6db74">&#34;2025-01-20T21:00:00Z&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;count&#34;</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="post-reactions">POST /reactions<a class="anchor" href="#post-reactions">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;target_type&#34;</span>: <span style="color:#e6db74">&#34;post&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;target_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-606&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;reaction_type&#34;</span>: <span style="color:#e6db74">&#34;like&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Response 201 Created:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;reaction_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-808&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Reaction added&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="delete-reactionsreaction_id">DELETE /reactions/{reaction_id}<a class="anchor" href="#delete-reactionsreaction_id">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Reaction removed&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h3 id="9-notifications">9. Notifications<a class="anchor" href="#9-notifications">#</a></h3>
<h4 id="get-notifications">GET /notifications<a class="anchor" href="#get-notifications">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Query Params:</strong></p>
<ul>
<li><code>unread_only</code>: true/false (default: false)</li>
<li><code>limit</code>: Max results (default: 20)</li>
</ul>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;notifications&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;notification_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-909&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;comment&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;actor&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;user_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-456&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;username&#34;</span>: <span style="color:#e6db74">&#34;friend1&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;avatar_url&#34;</span>: <span style="color:#e6db74">&#34;https://s3.../avatar.jpg&#34;</span>
</span></span><span style="display:flex;"><span>      },
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;target_type&#34;</span>: <span style="color:#e6db74">&#34;post&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;target_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-606&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;John commented on your post&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;is_read&#34;</span>: <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;created_at&#34;</span>: <span style="color:#e6db74">&#34;2025-01-20T21:00:00Z&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;unread_count&#34;</span>: <span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;count&#34;</span>: <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="put-notificationsnotification_idread">PUT /notifications/{notification_id}/read<a class="anchor" href="#put-notificationsnotification_idread">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Notification marked as read&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="put-notificationsread-all">PUT /notifications/read-all<a class="anchor" href="#put-notificationsread-all">#</a></h4>
<p><strong>Auth</strong>: Required</p>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;All notifications marked as read&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;count&#34;</span>: <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h3 id="10-admin-operations">10. Admin Operations<a class="anchor" href="#10-admin-operations">#</a></h3>
<h4 id="get-adminusers">GET /admin/users<a class="anchor" href="#get-adminusers">#</a></h4>
<p><strong>Auth</strong>: Required (admin only)</p>
<p><strong>Query Params:</strong></p>
<ul>
<li><code>role</code>: user/admin</li>
<li><code>is_active</code>: true/false</li>
<li><code>limit</code>, <code>offset</code></li>
</ul>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;users&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;user_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-123&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;user@example.com&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;username&#34;</span>: <span style="color:#e6db74">&#34;user1&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;role&#34;</span>: <span style="color:#e6db74">&#34;user&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;is_active&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;created_at&#34;</span>: <span style="color:#e6db74">&#34;2025-01-15T10:00:00Z&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;count&#34;</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="put-adminusersuser_idban">PUT /admin/users/{user_id}/ban<a class="anchor" href="#put-adminusersuser_idban">#</a></h4>
<p><strong>Auth</strong>: Required (admin only)</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;reason&#34;</span>: <span style="color:#e6db74">&#34;Spam content&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;User banned&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;user_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-123&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h4 id="get-adminstatistics">GET /admin/statistics<a class="anchor" href="#get-adminstatistics">#</a></h4>
<p><strong>Auth</strong>: Required (admin only)</p>
<p><strong>Response 200 OK:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;total_users&#34;</span>: <span style="color:#ae81ff">1000</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;active_users_last_30_days&#34;</span>: <span style="color:#ae81ff">600</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;total_recipes&#34;</span>: <span style="color:#ae81ff">5000</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;approved_recipes&#34;</span>: <span style="color:#ae81ff">2000</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;ai_generated_recipes&#34;</span>: <span style="color:#ae81ff">3000</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;total_ai_suggestions&#34;</span>: <span style="color:#ae81ff">10000</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;average_db_ai_mix&#34;</span>: <span style="color:#e6db74">&#34;60/40&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;invalid_ingredient_reports&#34;</span>: <span style="color:#ae81ff">50</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;monthly_cost_usd&#34;</span>: <span style="color:#ae81ff">155.50</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><hr>
<h2 id="response-codes">Response Codes<a class="anchor" href="#response-codes">#</a></h2>
<h3 id="success-codes">Success Codes<a class="anchor" href="#success-codes">#</a></h3>
<ul>
<li><strong>200 OK</strong>: Request successful</li>
<li><strong>201 Created</strong>: Resource created</li>
<li><strong>204 No Content</strong>: Successful deletion</li>
</ul>
<h3 id="client-error-codes">Client Error Codes<a class="anchor" href="#client-error-codes">#</a></h3>
<ul>
<li><strong>400 Bad Request</strong>: Invalid input</li>
<li><strong>401 Unauthorized</strong>: Missing or invalid token</li>
<li><strong>403 Forbidden</strong>: Insufficient permissions</li>
<li><strong>404 Not Found</strong>: Resource not found</li>
<li><strong>409 Conflict</strong>: Resource already exists</li>
<li><strong>429 Too Many Requests</strong>: Rate limit exceeded</li>
</ul>
<h3 id="server-error-codes">Server Error Codes<a class="anchor" href="#server-error-codes">#</a></h3>
<ul>
<li><strong>500 Internal Server Error</strong>: Unexpected error</li>
<li><strong>503 Service Unavailable</strong>: Service temporarily down</li>
<li><strong>504 Gateway Timeout</strong>: Request timeout (AI generation)</li>
</ul>
<h2 id="error-response-format">Error Response Format<a class="anchor" href="#error-response-format">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;error&#34;</span>: <span style="color:#e6db74">&#34;error_code&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Human-readable error message&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;details&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;field&#34;</span>: <span style="color:#e6db74">&#34;Additional context&#34;</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;timestamp&#34;</span>: <span style="color:#e6db74">&#34;2025-01-20T10:00:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;request_id&#34;</span>: <span style="color:#e6db74">&#34;uuid-xxx&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h2 id="rate-limiting">Rate Limiting<a class="anchor" href="#rate-limiting">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">Free Tier</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">AI Suggestions</span>: <span style="color:#ae81ff">10</span><span style="color:#ae81ff">/month</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">API Requests</span>: <span style="color:#ae81ff">1000</span><span style="color:#ae81ff">/hour</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Premium Tier</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">AI Suggestions</span>: <span style="color:#ae81ff">Unlimited</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">API Requests</span>: <span style="color:#ae81ff">10000</span><span style="color:#ae81ff">/hour</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Rate Limit Headers</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">X-RateLimit-Limit</span>: <span style="color:#ae81ff">1000</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">X-RateLimit-Remaining</span>: <span style="color:#ae81ff">995</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">X-RateLimit-Reset</span>: <span style="color:#ae81ff">1706097600</span></span></span></code></pre></div><h2 id="related-documents">Related Documents<a class="anchor" href="#related-documents">#</a></h2>
<ul>
<li><a href="10-architecture.md">10 - Architecture</a></li>
<li><a href="11-database.md">11 - Database</a></li>
<li><a href="13-security.md">13 - Security</a></li>
<li><a href="20-backend.md">20 - Backend</a></li>
</ul>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">

<div>

</div>

<div>

</div>

</div>





  
  
  
  <div class="flex flex-wrap justify-between">
    <span>
    
      <a href="/docs/dlc/11-database/" class="flex align-center">
        <img src="/icons/backward.svg" class="book-icon" alt="Previous" title="11 - Database Design" />
        <span>11 - Database Design</span>
      </a>
    
    </span>
    <span>
    
      <a href="/docs/dlc/13-security/" class="flex align-center">
        <span>13 - Security</span>
        <img src="/icons/forward.svg" class="book-icon" alt="Next" title="13 - Security" />
      </a>
    
    </span>
  </div>
  




  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
  
  <div class="book-comments">

</div>
  
 
        
        

 
      </footer>

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    

<aside class="book-toc">
  <div class="book-toc-content">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#api-overview">API Overview</a>
      <ul>
        <li><a href="#base-configuration">Base Configuration</a></li>
        <li><a href="#api-gateway-configuration">API Gateway Configuration</a></li>
      </ul>
    </li>
    <li><a href="#authentication">Authentication</a>
      <ul>
        <li><a href="#authentication-flow">Authentication Flow</a></li>
        <li><a href="#authenticated-requests">Authenticated Requests</a></li>
      </ul>
    </li>
    <li><a href="#api-endpoints">API Endpoints</a>
      <ul>
        <li><a href="#1-authentication--user-management">1. Authentication &amp; User Management</a></li>
        <li><a href="#2-ingredient-management">2. Ingredient Management</a></li>
        <li><a href="#3-ai-recipe-suggestions">3. AI Recipe Suggestions</a></li>
        <li><a href="#4-cooking-history--rating">4. Cooking History &amp; Rating</a></li>
        <li><a href="#5-recipe-management">5. Recipe Management</a></li>
        <li><a href="#6-privacy-settings">6. Privacy Settings</a></li>
        <li><a href="#7-social---friends">7. Social - Friends</a></li>
        <li><a href="#8-social---posts--comments">8. Social - Posts &amp; Comments</a></li>
        <li><a href="#9-notifications">9. Notifications</a></li>
        <li><a href="#10-admin-operations">10. Admin Operations</a></li>
      </ul>
    </li>
    <li><a href="#response-codes">Response Codes</a>
      <ul>
        <li><a href="#success-codes">Success Codes</a></li>
        <li><a href="#client-error-codes">Client Error Codes</a></li>
        <li><a href="#server-error-codes">Server Error Codes</a></li>
      </ul>
    </li>
    <li><a href="#error-response-format">Error Response Format</a></li>
    <li><a href="#rate-limiting">Rate Limiting</a></li>
    <li><a href="#related-documents">Related Documents</a></li>
  </ul>
</nav>



  </div>
</aside>

 
  </main>

  
</body>
</html>


















