[{"id":0,"href":"/docs/summary/aws-services-diagram/","title":"AWS Services Architecture Diagram","section":"Summary","content":"SÆ¡ Äá»“ Kiáº¿n TrÃºc Dá»‹ch Vá»¥ AWS#\rKiáº¿n TrÃºc Há»‡ Thá»‘ng#\rgraph TB\rsubgraph \u0026#34;Táº§ng Client\u0026#34;\rWebApp[Web App\u0026lt;br/\u0026gt;Next.js]\rMobileApp[Mobile App\u0026lt;br/\u0026gt;React Native - TÆ°Æ¡ng lai]\rend\rsubgraph \u0026#34;CDN \u0026amp; Hosting\u0026#34;\rCloudFront[Amazon CloudFront\u0026lt;br/\u0026gt;CDN]\rAmplify[AWS Amplify\u0026lt;br/\u0026gt;Hosting \u0026amp; CI/CD]\rend\rsubgraph \u0026#34;Táº§ng API Gateway\u0026#34;\rAPIGateway[Amazon API Gateway\u0026lt;br/\u0026gt;REST API]\rWSGateway[API Gateway\u0026lt;br/\u0026gt;WebSocket - TÆ°Æ¡ng lai]\rend\rsubgraph \u0026#34;XÃ¡c Thá»±c\u0026#34;\rCognitoUser[Amazon Cognito\u0026lt;br/\u0026gt;User Pool]\rCognitoIdentity[Cognito Identity Pool]\rend\rsubgraph \u0026#34;Táº§ng Compute\u0026#34;\rLambdaAuth[Lambda: Auth Handler\u0026lt;br/\u0026gt;Node.js 20]\rLambdaRecipe[Lambda: Recipe CRUD\u0026lt;br/\u0026gt;Node.js 20]\rLambdaAI[Lambda: AI Suggestion\u0026lt;br/\u0026gt;Node.js 20]\rLambdaProfile[Lambda: User Profile\u0026lt;br/\u0026gt;Node.js 20]\rLambdaSocial[Lambda: Social/Friends\u0026lt;br/\u0026gt;Node.js 20]\rLambdaAdmin[Lambda: Admin Operations\u0026lt;br/\u0026gt;Node.js 20]\rend\rsubgraph \u0026#34;Dá»‹ch Vá»¥ AI\u0026#34;\rBedrock[Amazon Bedrock\u0026lt;br/\u0026gt;Claude 3.5 Sonnet/Haiku]\rend\rsubgraph \u0026#34;Táº§ng Database\u0026#34;\rDynamoDB[Amazon DynamoDB\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;Báº£ng: Users\u0026lt;br/\u0026gt;Báº£ng: UserData\u0026lt;br/\u0026gt;Báº£ng: Recipes\u0026lt;br/\u0026gt;Báº£ng: AI_Suggestions\u0026lt;br/\u0026gt;Báº£ng: Privacy\u0026lt;br/\u0026gt;Báº£ng: Friendships]\rend\rsubgraph \u0026#34;LÆ°u Trá»¯\u0026#34;\rS3[Amazon S3\u0026lt;br/\u0026gt;User Uploads \u0026amp; Assets]\rend\rsubgraph \u0026#34;GiÃ¡m SÃ¡t \u0026amp; Logging\u0026#34;\rCloudWatch[Amazon CloudWatch\u0026lt;br/\u0026gt;Logs \u0026amp; Metrics]\rXRay[AWS X-Ray\u0026lt;br/\u0026gt;Tracing]\rend\rsubgraph \u0026#34;Báº£o Máº­t\u0026#34;\rWAF[AWS WAF\u0026lt;br/\u0026gt;Web Application Firewall]\rSecrets[AWS Secrets Manager\u0026lt;br/\u0026gt;API Keys]\rend\rWebApp --\u0026gt; CloudFront\rCloudFront --\u0026gt; Amplify\rWebApp --\u0026gt; APIGateway\rAPIGateway --\u0026gt; CognitoUser\rCognitoUser --\u0026gt; LambdaAuth\rCognitoIdentity --\u0026gt; S3\rAPIGateway --\u0026gt; LambdaRecipe\rAPIGateway --\u0026gt; LambdaAI\rAPIGateway --\u0026gt; LambdaProfile\rAPIGateway --\u0026gt; LambdaSocial\rAPIGateway --\u0026gt; LambdaAdmin\rLambdaAI --\u0026gt; Bedrock\rLambdaRecipe --\u0026gt; DynamoDB\rLambdaAI --\u0026gt; DynamoDB\rLambdaProfile --\u0026gt; DynamoDB\rLambdaSocial --\u0026gt; DynamoDB\rLambdaAdmin --\u0026gt; DynamoDB\rLambdaRecipe --\u0026gt; S3\rLambdaAuth --\u0026gt; CloudWatch\rLambdaRecipe --\u0026gt; CloudWatch\rLambdaAI --\u0026gt; CloudWatch\rAPIGateway --\u0026gt; WAFPhÃ¢n TÃ­ch Chi Tiáº¿t CÃ¡c Dá»‹ch Vá»¥#\r1. Frontend \u0026amp; CDN#\rAWS Amplify:\nHost á»©ng dá»¥ng Next.js Pipeline CI/CD (tá»± Ä‘á»™ng deploy tá»« GitHub) Custom domain \u0026amp; SSL certificates Chi phÃ­: ~$15/thÃ¡ng Amazon CloudFront:\nCDN toÃ n cáº§u cho phÃ¢n phá»‘i ná»™i dung nhanh chÃ³ng Cache cÃ¡c static assets Chi phÃ­: ~$5-10/thÃ¡ng (1TB data transfer) 2. XÃ¡c Thá»±c \u0026amp; PhÃ¢n Quyá»n#\rAmazon Cognito User Pool:\nÄÄƒng kÃ½ \u0026amp; Ä‘Äƒng nháº­p ngÆ°á»i dÃ¹ng XÃ¡c minh email KhÃ´i phá»¥c máº­t kháº©u Há»— trá»£ MFA (tÆ°Æ¡ng lai) Chi phÃ­: MIá»„N PHÃ (\u0026lt; 50,000 ) Cognito Identity Pool:\nThÃ´ng tin xÃ¡c thá»±c AWS táº¡m thá»i Ä‘á»ƒ truy cáº­p S3 Quyá»n IAM chi tiáº¿t 3. Táº§ng API#\rAmazon API Gateway (REST):\nRESTful API endpoints Validation request Quáº£n lÃ½ API key Throttling \u0026amp; rate limiting Cáº¥u hÃ¬nh CORS Chi phÃ­: ~$3.50 trÃªn triá»‡u requests API Endpoints#\rPOST /auth/register\rPOST /auth/login\rGET /user/profile\rPUT /user/profile\rPOST /user/ingredients\rGET /user/ingredients\rDELETE /user/ingredients/{id}\rPUT /user/privacy\rGET /user/privacy\rPOST /friends/request\rGET /friends\rPUT /friends/{id}/accept\rPUT /friends/{id}/reject\rDELETE /friends/{id}\rPOST /recipes\rGET /recipes/{id}\rPUT /recipes/{id}\rDELETE /recipes/{id}\rGET /recipes/search\rPOST /ai/suggest\rGET /ai/suggestions\rPOST /ai/feedback4. Lambda Functions#\rLambda 1: Auth Handler#\rRuntime: Node.js 20 Memory: 256MB Timeout: 10s Triggers: Cognito Post-Authentication Má»¥c Ä‘Ã­ch: Táº¡o profile ngÆ°á»i dÃ¹ng khi Ä‘Äƒng nháº­p láº§n Ä‘áº§u Lambda 2: Recipe CRUD#\rRuntime: Node.js 20 Memory: 512MB Timeout: 30s Triggers: API Gateway Má»¥c Ä‘Ã­ch: Táº¡o, Ä‘á»c, cáº­p nháº­t, xÃ³a recipes Upload áº£nh recipe lÃªn S3 Query DynamoDB Lambda 3: AI Suggestion Engine â­#\rRuntime: Node.js 20 Memory: 1024MB Timeout: 60s Triggers: API Gateway Má»¥c Ä‘Ã­ch: Gá»i Amazon Bedrock (Claude 3.5) Táº¡o gá»£i Ã½ cÃ´ng thá»©c PhÃ¢n tÃ­ch nguyÃªn liá»‡u ngÆ°á»i dÃ¹ng LÆ°u gá»£i Ã½ vÃ o DynamoDB Chi phÃ­: Lambda tá»‘n kÃ©m nháº¥t (~70% chi phÃ­ compute) Lambda 4: User Profile Manager#\rRuntime: Node.js 20 Memory: 256MB Timeout: 10s Triggers: API Gateway Má»¥c Ä‘Ã­ch: Quáº£n lÃ½ profile \u0026amp; preferences ngÆ°á»i dÃ¹ng Cáº­p nháº­t danh sÃ¡ch nguyÃªn liá»‡u Xá»­ lÃ½ upload avatar Quáº£n lÃ½ cÃ i Ä‘áº·t riÃªng tÆ° Lambda 5: Social/Friends Handler#\rRuntime: Node.js 20 Memory: 256MB Timeout: 10s Triggers: API Gateway Má»¥c Ä‘Ã­ch: Quáº£n lÃ½ yÃªu cáº§u káº¿t báº¡n Cháº¥p nháº­n/tá»« chá»‘i yÃªu cáº§u káº¿t báº¡n Liá»‡t kÃª danh sÃ¡ch báº¡n bÃ¨ Lá»c dá»¯ liá»‡u theo privacy settings Lambda 6: Admin Operations#\rRuntime: Node.js 20 Memory: 512MB Timeout: 30s Triggers: API Gateway (Chá»‰ Admin) Má»¥c Ä‘Ã­ch: Quáº£n lÃ½ ngÆ°á»i dÃ¹ng (ban/unban) Kiá»ƒm duyá»‡t ná»™i dung Thá»‘ng kÃª há»‡ thá»‘ng PhÃª duyá»‡t/tá»« chá»‘i recipes 5. Dá»‹ch Vá»¥ AI/ML#\rAmazon Bedrock (Claude 3.5)#\rModel: Claude 3.5 Sonnet (hoáº·c Haiku Ä‘á»ƒ tiáº¿t kiá»‡m chi phÃ­) Use Case: AI agent gá»£i Ã½ cÃ´ng thá»©c Input: Profile ngÆ°á»i dÃ¹ng + preferences + nguyÃªn liá»‡u Output: Gá»£i Ã½ cÃ´ng thá»©c vá»›i hÆ°á»›ng dáº«n Chi phÃ­: Sonnet: $3 trÃªn triá»‡u input tokens, $15 trÃªn triá»‡u output tokens Haiku: $0.25 trÃªn triá»‡u input tokens, $1.25 trÃªn triá»‡u output tokens Æ¯á»›c tÃ­nh: $25-50/thÃ¡ng (1,000 users, 10 suggestions/user/thÃ¡ng) Vá»›i Haiku: $3-7/thÃ¡ng (tiáº¿t kiá»‡m 70%) 6. Database#\rAmazon DynamoDB (NoSQL Database)#\rCÃ¡c báº£ng:\nUsers (PK: user_id) - TÃ i khoáº£n ngÆ°á»i dÃ¹ng \u0026amp; roles UserData (PK: user_id, SK: data_type) - Preferences, nguyÃªn liá»‡u PrivacySettings (PK: user_id) - Cáº¥u hÃ¬nh riÃªng tÆ° Friendships (PK: user_id, SK: friend_id) - Káº¿t ná»‘i máº¡ng xÃ£ há»™i Recipes (PK: recipe_id, GSI: user_id) - Dá»¯ liá»‡u cÃ´ng thá»©c AISuggestions (PK: user_id, SK: timestamp) - Lá»‹ch sá»­ AI TÃ­nh nÄƒng:\nAuto-scaling (on-demand mode) Point-in-time recovery (PITR) DynamoDB Streams (cho cáº­p nháº­t real-time) Global Secondary Indexes (GSI) cho truy váº¥n MÃ£ hÃ³a at rest Chi phÃ­: $15-25/thÃ¡ng (on-demand pricing) Táº¡i sao chá»n DynamoDB thay vÃ¬ RDS?\nâœ… Serverless (khÃ´ng cáº§n quáº£n lÃ½ server) âœ… Auto-scaling vá» zero cost khi idle âœ… TÃ­ch há»£p tá»‘t hÆ¡n vá»›i Lambda âœ… Äá»™ trá»… tháº¥p hÆ¡n cho key-value access âœ… Tiáº¿t kiá»‡m chi phÃ­ cho MVP ($15 vs $30+ cho RDS) 7. LÆ°u Trá»¯#\rAmazon S3#\rBuckets:\nrecipe-images-prod: áº¢nh cÃ´ng thá»©c user-avatars-prod: áº¢nh Ä‘áº¡i diá»‡n static-assets-prod: Assets á»©ng dá»¥ng TÃ­nh nÄƒng:\nVersioning enabled Lifecycle policies (xÃ³a sau 90 ngÃ y cho temp files) S3 Transfer Acceleration Chi phÃ­: ~$5/thÃ¡ng (50GB storage) 8. Báº£o Máº­t#\rAWS WAF#\rBáº£o vá»‡:\nSQL injection XSS attacks Rate limiting (1000 requests/5min má»—i IP) Geographic restrictions (tÃ¹y chá»n) Chi phÃ­: $5/thÃ¡ng + $1 trÃªn triá»‡u requests AWS Secrets Manager#\rSecrets:\nDatabase credentials (náº¿u dÃ¹ng RDS) Third-party API keys (náº¿u cáº§n) Chi phÃ­: $0.40 má»—i secret má»—i thÃ¡ng 9. GiÃ¡m SÃ¡t \u0026amp; Logging#\rAmazon CloudWatch#\rLogs: Táº¥t cáº£ logs cá»§a Lambda functions Metrics: Metrics cá»§a API Gateway, Lambda, DynamoDB Alarms: Lambda errors \u0026gt; 1% API Gateway 5xx errors DynamoDB throttling Chi phÃ­: ~$5-10/thÃ¡ng AWS X-Ray#\rTracing: Tracing request tá»« Ä‘áº§u Ä‘áº¿n cuá»‘i Performance: XÃ¡c Ä‘á»‹nh bottlenecks Chi phÃ­: $5 trÃªn triá»‡u traces (100k Ä‘áº§u miá»…n phÃ­) SÆ¡ Äá»“ Luá»“ng Dá»¯ Liá»‡u#\rsequenceDiagram\rparticipant User\rparticipant CloudFront\rparticipant Next.js\rparticipant APIGateway\rparticipant Cognito\rparticipant Lambda\rparticipant Bedrock\rparticipant DynamoDB\rUser-\u0026gt;\u0026gt;CloudFront: Truy cáº­p website\rCloudFront-\u0026gt;\u0026gt;Next.js: Phá»¥c vá»¥ ná»™i dung tÄ©nh\rNext.js-\u0026gt;\u0026gt;User: Hiá»ƒn thá»‹ UI\rUser-\u0026gt;\u0026gt;APIGateway: YÃªu cáº§u Ä‘Äƒng nháº­p\rAPIGateway-\u0026gt;\u0026gt;Cognito: XÃ¡c thá»±c\rCognito-\u0026gt;\u0026gt;APIGateway: JWT Token\rAPIGateway-\u0026gt;\u0026gt;User: Tráº£ vá» token\rUser-\u0026gt;\u0026gt;APIGateway: YÃªu cáº§u gá»£i Ã½ AI\rAPIGateway-\u0026gt;\u0026gt;Cognito: XÃ¡c minh token\rAPIGateway-\u0026gt;\u0026gt;Lambda: Gá»i AI Lambda\rLambda-\u0026gt;\u0026gt;DynamoDB: Láº¥y profile ngÆ°á»i dÃ¹ng\rLambda-\u0026gt;\u0026gt;DynamoDB: Láº¥y nguyÃªn liá»‡u ngÆ°á»i dÃ¹ng\rLambda-\u0026gt;\u0026gt;Bedrock: Gá»i Claude 3.5\rBedrock-\u0026gt;\u0026gt;Lambda: Gá»£i Ã½ cÃ´ng thá»©c\rLambda-\u0026gt;\u0026gt;DynamoDB: LÆ°u gá»£i Ã½\rLambda-\u0026gt;\u0026gt;APIGateway: Tráº£ vá» káº¿t quáº£\rAPIGateway-\u0026gt;\u0026gt;User: Hiá»ƒn thá»‹ gá»£i Ã½"},{"id":1,"href":"/docs/summary/","title":"Summary","section":"Docs","content":"AWS Project Documentation#\rComplete documentation for Smart Cooking App project.\n"},{"id":2,"href":"/docs/summary/ai-agent-implementation/","title":"Káº¿ Hoáº¡ch Triá»ƒn Khai AI Agent","section":"Summary","content":"Káº¾ HOáº CH TRIá»‚N KHAI AI AGENT#\rHá»‡ Thá»‘ng Gá»£i Ã CÃ´ng Thá»©c ThÃ´ng Minh\n   Tá»”NG QUAN#\rTÃ­nh nÄƒng: AI Agent gá»£i Ã½ mÃ³n Äƒn thÃ´ng minh dá»±a trÃªn:\nThÃ´ng tin cÃ¡ nhÃ¢n (giá»›i tÃ­nh, tuá»•i, quá»‘c gia) Sá»Ÿ thÃ­ch áº©m thá»±c (mÃ³n canh, mÃ³n chiÃªn, mÃ³n háº¥pâ€¦) NguyÃªn liá»‡u nháº­p Ä‘Æ¡n giáº£n (chá»‰ tÃªn, khÃ´ng quáº£n lÃ½ sá»‘ lÆ°á»£ng/háº¡n dÃ¹ng) Pháº¡m vi:\nâœ… User chá»‰ nháº­p danh sÃ¡ch nguyÃªn liá»‡u cÃ³ sáºµn âœ… AI táº¡o cÃ´ng thá»©c phÃ¹ há»£p vá»›i user profile Thá»i gian: 2 tuáº§n (Tuáº§n 3-4 trong deployment plan)\n   LUá»’NG NGÆ¯á»œI DÃ™NG#\râ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\râ”‚ Äáº¦U VÃ€O NGÆ¯á»œI DÃ™NG â”‚\râ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\râ”‚ NgÆ°á»i dÃ¹ng A: â”‚\râ”‚ â€¢ Nam, 1990 (34 tuá»•i), Vietnam â”‚\râ”‚ â€¢ ThÃ­ch Äƒn: canh, mÃ³n háº¥p â”‚\râ”‚ â€¢ NguyÃªn liá»‡u: CÃ¡ rÃ´, bÃ´ng sÃºng, gá»«ng, hÃ nh â”‚\râ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\râ”‚\râ–¼\râ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\râ”‚ Xá»¬ LÃ AI AGENT â”‚\râ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\râ”‚ 1. Láº¥y thÃ´ng tin tá»« user_preferences â”‚\râ”‚ 2. Láº¥y nguyÃªn liá»‡u tá»« user_ingredients â”‚\râ”‚ 3. XÃ¢y dá»±ng prompt tÃ¹y chá»‰nh: â”‚\râ”‚ \u0026#34;Táº¡o mÃ³n Äƒn vá»›i: â”‚\râ”‚ - NguyÃªn liá»‡u: CÃ¡ rÃ´, bÃ´ng sÃºng â”‚\râ”‚ - Cho: nam, trung niÃªn â”‚\râ”‚ - MÃ³n: Viá»‡t Nam â”‚\râ”‚ - Loáº¡i: cÃ³ thá»ƒ cÃ³ canh hoáº·c mÃ³n háº¥p\u0026#34; â”‚\râ”‚ 4. Gá»i Bedrock Claude API â”‚\râ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\râ”‚\râ–¼\râ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\râ”‚ PHáº¢N Há»’I AI \u0026amp; Káº¾T QUáº¢ CUá»I CÃ™NG â”‚\râ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\râ”‚ Gá»£i Ã½: \u0026#34;Canh cÃ¡ rÃ´ náº¥u bÃ´ng sÃºng\u0026#34; â”‚\râ”‚ â€¢ PhÃ¹ há»£p: nam trung niÃªn, mÃ³n Viá»‡t, cÃ³ canh â”‚\râ”‚ â€¢ NguyÃªn liá»‡u match: 4/4 â”‚\râ”‚ â€¢ Äá»™ khÃ³: Dá»… â”‚\râ”‚ â€¢ Thá»i gian: 30 phÃºt â”‚\râ”‚ â”‚\râ”‚    CÃ´ng thá»©c chi tiáº¿t (tá»« AI) â”‚\râ”‚ ğŸ¥˜ ThÃ´ng tin dinh dÆ°á»¡ng â”‚\râ”‚ â­ LÆ°u vÃ o favorites â”‚\râ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   TRIá»‚N KHAI Ká»¸ THUáº¬T#\rBackend: Node.js 20 Lambda Functions#\rLambda Gá»£i Ã AI:\n// Sá»­ dá»¥ng AWS SDK v3 cho Bedrock const { BedrockRuntimeClient, InvokeModelCommand } = require(\u0026#39;@aws-sdk/client-bedrock-runtime\u0026#39;); // Model: Claude 3 Haiku (tiáº¿t kiá»‡m chi phÃ­) // Äáº§u vÃ o: Sá»Ÿ thÃ­ch ngÆ°á»i dÃ¹ng + nguyÃªn liá»‡u // Äáº§u ra: JSON gá»£i Ã½ cÃ´ng thá»©c Dá»‹ch Vá»¥ ChÃ­nh:\nAmazon Bedrock: Claude 3 Haiku model DynamoDB: LÆ°u trá»¯ dá»¯ liá»‡u ngÆ°á»i dÃ¹ng \u0026amp; gá»£i Ã½ AI Lambda: Serverless compute (Node.js 20) API Gateway: REST API endpoints CÆ¡ Sá»Ÿ Dá»¯ Liá»‡u: Amazon DynamoDB#\rCÃ¡c Báº£ng Sá»­ Dá»¥ng:\nUsers (PK: user_id) - Há»“ sÆ¡ \u0026amp; vai trÃ² UserData (PK: user_id, SK: PREFERENCES | INGREDIENTS) - CÃ i Ä‘áº·t ngÆ°á»i dÃ¹ng PrivacySettings (PK: user_id) - Cáº¥u hÃ¬nh quyá»n riÃªng tÆ° Friendships (PK: user_id, SK: friend_id) - Káº¿t ná»‘i xÃ£ há»™i AISuggestions (PK: user_id, SK: timestamp) - Lá»‹ch sá»­ AI Triá»ƒn Khai Quyá»n RiÃªng TÆ°:\n// Bá»™ lá»c quyá»n riÃªng tÆ° Ã¡p dá»¥ng trÆ°á»›c khi tráº£ vá» dá»¯ liá»‡u ngÆ°á»i dÃ¹ng if (privacy.ingredients_visibility === \u0026#39;friends\u0026#39; \u0026amp;\u0026amp; !isFriend) { delete userProfile.ingredients; }API Endpoints#\rLuá»“ng Gá»£i Ã AI:\nPOST /ai/suggest\rAuthorization: Bearer \u0026lt;JWT\u0026gt;\rBody: {\r\u0026#34;request\u0026#34;: \u0026#34;Something light for dinner\u0026#34;,\r\u0026#34;dietary_preferences\u0026#34;: [\u0026#34;no pork\u0026#34;]\r}\rResponse:\r{\r\u0026#34;suggestion_id\u0026#34;: \u0026#34;uuid\u0026#34;,\r\u0026#34;recipe\u0026#34;: {\r\u0026#34;name\u0026#34;: \u0026#34;Canh cÃ¡ rÃ´ náº¥u bÃ´ng sÃºng\u0026#34;,\r\u0026#34;ingredients\u0026#34;: [...],\r\u0026#34;instructions\u0026#34;: [...],\r\u0026#34;nutrition\u0026#34;: {...}\r}\r}Endpoints Quyá»n RiÃªng TÆ° \u0026amp; XÃ£ Há»™i:\nPUT /user/privacy - Cáº­p nháº­t cÃ i Ä‘áº·t quyá»n riÃªng tÆ°\rGET /user/profile/{userId} - Láº¥y há»“ sÆ¡ (Ä‘Ã£ lá»c quyá»n riÃªng tÆ°)\rPOST /friends/request - Gá»­i yÃªu cáº§u káº¿t báº¡n\rGET /friends - Danh sÃ¡ch báº¡n bÃ¨Endpoints Quáº£n Trá»‹:\nGET /admin/users - Danh sÃ¡ch táº¥t cáº£ ngÆ°á»i dÃ¹ng (chá»‰ admin)\rPUT /admin/users/{id}/ban - Cáº¥m ngÆ°á»i dÃ¹ng (chá»‰ admin)\rGET /admin/statistics - Thá»‘ng kÃª há»‡ thá»‘ng (chá»‰ admin)   QUYá»€N RIÃŠNG TÆ¯ \u0026amp; Báº¢O Máº¬T#\rCÃ¡c Má»©c Quyá»n RiÃªng TÆ°#\rPublic: Má»i ngÆ°á»i cÃ³ thá»ƒ xem Friends: Chá»‰ báº¡n bÃ¨ Ä‘Ã£ cháº¥p nháº­n cÃ³ thá»ƒ xem Private: Chá»‰ ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ xem Thuá»™c TÃ­nh ÄÆ°á»£c Kiá»ƒm SoÃ¡t Quyá»n RiÃªng TÆ°#\rEmail (máº·c Ä‘á»‹nh: private) NgÃ y sinh (máº·c Ä‘á»‹nh: friends) Giá»›i tÃ­nh (máº·c Ä‘á»‹nh: public) Quá»‘c gia (máº·c Ä‘á»‹nh: public) CÃ´ng thá»©c (máº·c Ä‘á»‹nh: public) NguyÃªn liá»‡u (máº·c Ä‘á»‹nh: friends) Sá»Ÿ thÃ­ch (máº·c Ä‘á»‹nh: friends) Kiá»ƒm SoÃ¡t Truy Cáº­p Theo Vai TrÃ²#\rUser: Truy cáº­p thÃ´ng thÆ°á»ng Admin: Truy cáº­p Ä‘áº§y Ä‘á»§ + cÃ´ng cá»¥ quáº£n trá»‹ Thá»i Gian \u0026amp; Má»‘c Quan Trá»ng#\rXem HÆ°á»›ng Dáº«n Triá»ƒn Khai KhÃ¡ch HÃ ng Ä‘á»ƒ biáº¿t thá»i gian chi tiáº¿t.\n"},{"id":3,"href":"/docs/summary/database-diagram/","title":"Database Schema Diagram","section":"Summary","content":"SÆ¡ Äá»“ Cáº¥u TrÃºc CÆ¡ Sá»Ÿ Dá»¯ Liá»‡u#\rERD (SÆ¡ Äá»“ Quan Há»‡ Thá»±c Thá»ƒ)#\r// Báº£ng NgÆ°á»i DÃ¹ng\rTable users {\ruser_id varchar(36) [pk, note: \u0026#39;UUID tá»« Cognito\u0026#39;]\remail varchar(255) [unique, not null]\rusername varchar(50) [unique, not null]\rfull_name varchar(100)\rdate_of_birth date\rgender enum(\u0026#39;male\u0026#39;, \u0026#39;female\u0026#39;, \u0026#39;other\u0026#39;)\rcountry varchar(50)\ravatar_url varchar(500)\rrole enum(\u0026#39;user\u0026#39;, \u0026#39;admin\u0026#39;) [default: \u0026#39;user\u0026#39;]\ris_active boolean [default: true]\rcreated_at timestamp [default: `now()`]\rupdated_at timestamp [default: `now()`]\rlast_login timestamp\rindexes {\remail\rusername\rrole\r}\r}\r// TÃ¹y Chá»n NgÆ°á»i DÃ¹ng\rTable user_preferences {\rpreference_id varchar(36) [pk]\ruser_id varchar(36) [ref: \u0026gt; users.user_id, not null]\rdietary_restrictions json [note: \u0026#39;chay, thuáº§n chay, halal, kosher, v.v.\u0026#39;]\rallergies json [note: \u0026#39;Danh sÃ¡ch dá»‹ á»©ng\u0026#39;]\rfavorite_cuisines json [note: \u0026#39;Ã, Viá»‡t Nam, Nháº­t Báº£n, v.v.\u0026#39;]\rcooking_methods json [note: \u0026#39;háº¥p, chiÃªn, nÆ°á»›ng, sÃºp, v.v.\u0026#39;]\rspice_level enum(\u0026#39;none\u0026#39;, \u0026#39;mild\u0026#39;, \u0026#39;medium\u0026#39;, \u0026#39;hot\u0026#39;, \u0026#39;very_hot\u0026#39;)\rcreated_at timestamp [default: `now()`]\rupdated_at timestamp [default: `now()`]\r}\r// CÃ i Äáº·t Quyá»n RiÃªng TÆ°\rTable privacy_settings {\rsetting_id varchar(36) [pk]\ruser_id varchar(36) [ref: \u0026gt; users.user_id, not null, unique]\rprofile_visibility enum(\u0026#39;public\u0026#39;, \u0026#39;friends\u0026#39;, \u0026#39;private\u0026#39;) [default: \u0026#39;public\u0026#39;, note: \u0026#39;Ai cÃ³ thá»ƒ xem há»“ sÆ¡\u0026#39;]\remail_visibility enum(\u0026#39;public\u0026#39;, \u0026#39;friends\u0026#39;, \u0026#39;private\u0026#39;) [default: \u0026#39;private\u0026#39;]\rdate_of_birth_visibility enum(\u0026#39;public\u0026#39;, \u0026#39;friends\u0026#39;, \u0026#39;private\u0026#39;) [default: \u0026#39;friends\u0026#39;]\rgender_visibility enum(\u0026#39;public\u0026#39;, \u0026#39;friends\u0026#39;, \u0026#39;private\u0026#39;) [default: \u0026#39;public\u0026#39;]\rcountry_visibility enum(\u0026#39;public\u0026#39;, \u0026#39;friends\u0026#39;, \u0026#39;private\u0026#39;) [default: \u0026#39;public\u0026#39;]\rrecipes_visibility enum(\u0026#39;public\u0026#39;, \u0026#39;friends\u0026#39;, \u0026#39;private\u0026#39;) [default: \u0026#39;public\u0026#39;]\ringredients_visibility enum(\u0026#39;public\u0026#39;, \u0026#39;friends\u0026#39;, \u0026#39;private\u0026#39;) [default: \u0026#39;friends\u0026#39;]\rpreferences_visibility enum(\u0026#39;public\u0026#39;, \u0026#39;friends\u0026#39;, \u0026#39;private\u0026#39;) [default: \u0026#39;friends\u0026#39;]\rcreated_at timestamp [default: `now()`]\rupdated_at timestamp [default: `now()`]\rindexes {\ruser_id\r}\r}\r// Quan Há»‡ Báº¡n BÃ¨\rTable friendships {\rfriendship_id varchar(36) [pk]\ruser_id varchar(36) [ref: \u0026gt; users.user_id, not null]\rfriend_id varchar(36) [ref: \u0026gt; users.user_id, not null]\rstatus enum(\u0026#39;pending\u0026#39;, \u0026#39;accepted\u0026#39;, \u0026#39;blocked\u0026#39;) [default: \u0026#39;pending\u0026#39;]\rrequested_at timestamp [default: `now()`]\rresponded_at timestamp\rindexes {\r(user_id, friend_id) [unique]\ruser_id\rfriend_id\rstatus\r}\r}\r// NguyÃªn Liá»‡u NgÆ°á»i DÃ¹ng (Danh sÃ¡ch Ä‘Æ¡n giáº£n - khÃ´ng theo dÃµi sá»‘ lÆ°á»£ng)\rTable user_ingredients {\ringredient_id varchar(36) [pk]\ruser_id varchar(36) [ref: \u0026gt; users.user_id, not null]\ringredient_name varchar(100) [not null]\rcategory varchar(50) [note: \u0026#39;thá»‹t, rau, gia vá»‹, sá»¯a, v.v.\u0026#39;]\radded_at timestamp [default: `now()`]\rindexes {\r(user_id, ingredient_name) [unique]\r}\r}\r// CÃ´ng Thá»©c (Do ngÆ°á»i dÃ¹ng táº¡o \u0026amp; AI táº¡o)\rTable recipes {\rrecipe_id varchar(36) [pk]\ruser_id varchar(36) [ref: \u0026gt; users.user_id, note: \u0026#39;NgÆ°á»i táº¡o - null náº¿u lÃ  cÃ´ng thá»©c há»‡ thá»‘ng\u0026#39;]\rtitle varchar(200) [not null]\rnormalized_title varchar(200) [note: \u0026#39;Chá»¯ thÆ°á»ng, khÃ´ng dáº¥u Ä‘á»ƒ tÃ¬m kiáº¿m\u0026#39;]\rdescription text\rcuisine_type varchar(50)\rcooking_method varchar(50)\rdifficulty enum(\u0026#39;easy\u0026#39;, \u0026#39;medium\u0026#39;, \u0026#39;hard\u0026#39;)\rprep_time_minutes int\rcook_time_minutes int\rservings int\rcalories_per_serving int\rinstructions json [note: \u0026#39;Máº£ng cÃ¡c Ä‘á»‘i tÆ°á»£ng bÆ°á»›c\u0026#39;]\rnutrition json [note: \u0026#39;Protein, carbs, cháº¥t bÃ©o, v.v.\u0026#39;]\ris_public boolean [default: false]\ris_ai_generated boolean [default: false]\rai_cache_hit_count int [default: 0, note: \u0026#39;Sá»‘ láº§n tÃ¡i sá»­ dá»¥ng tá»« cache\u0026#39;]\rcreated_at timestamp [default: `now()`]\rupdated_at timestamp [default: `now()`]\rindexes {\ruser_id\rnormalized_title\rcuisine_type\rcooking_method\r}\r}\r// Bá»™ Nhá»› Cache CÃ´ng Thá»©c (CÃ´ng thá»©c AI táº¡o Ä‘á»ƒ tÃ¡i sá»­ dá»¥ng)\rTable recipe_cache {\rcache_id varchar(36) [pk]\rrecipe_name varchar(200) [not null]\rnormalized_name varchar(200) [unique, not null, note: \u0026#39;KhÃ³a tÃ¬m kiáº¿m\u0026#39;]\rrecipe_data json [note: \u0026#39;JSON cÃ´ng thá»©c Ä‘áº§y Ä‘á»§ tá»« AI\u0026#39;]\ringredients_hash varchar(64) [note: \u0026#39;Hash cá»§a danh sÃ¡ch nguyÃªn liá»‡u\u0026#39;]\rcuisine_type varchar(50)\rhit_count int [default: 0, note: \u0026#39;Bá»™ Ä‘áº¿m tÃ¡i sá»­ dá»¥ng\u0026#39;]\rlast_accessed timestamp\rcreated_at timestamp [default: `now()`]\rindexes {\rnormalized_name\ringredients_hash\rcuisine_type\r}\r}\r// NguyÃªn Liá»‡u CÃ´ng Thá»©c\rTable recipe_ingredients {\rid varchar(36) [pk]\rrecipe_id varchar(36) [ref: \u0026gt; recipes.recipe_id, not null]\ringredient_name varchar(100) [not null]\rquantity varchar(50) [note: \u0026#39;2 chÃ©n, 500g, v.v.\u0026#39;]\runit varchar(20)\ris_optional boolean [default: false]\rindexes {\rrecipe_id\r}\r}\r// Lá»‹ch Sá»­ Gá»£i Ã AI\rTable ai_suggestions {\rsuggestion_id varchar(36) [pk]\ruser_id varchar(36) [ref: \u0026gt; users.user_id, not null]\rrecipe_id varchar(36) [ref: \u0026gt; recipes.recipe_id]\rcache_id varchar(36) [ref: \u0026gt; recipe_cache.cache_id, note: \u0026#39;Náº¿u tá»« cache\u0026#39;]\rprompt_text text [note: \u0026#39;Äáº§u vÃ o cá»§a ngÆ°á»i dÃ¹ng cho AI\u0026#39;]\ringredients_used json [note: \u0026#39;Danh sÃ¡ch nguyÃªn liá»‡u tá»« user_ingredients\u0026#39;]\rai_response json [note: \u0026#39;Pháº£n há»“i AI Ä‘áº§y Ä‘á»§\u0026#39;]\rwas_from_cache boolean [default: false, note: \u0026#39;True náº¿u tÃ¡i sá»­ dá»¥ng tá»« cache\u0026#39;]\rwas_accepted boolean [default: false]\rfeedback_rating int [note: \u0026#39;1-5 sao\u0026#39;]\rfeedback_comment text\rcreated_at timestamp [default: `now()`]\rindexes {\ruser_id\rcreated_at\rcache_id\r}\r}\r// YÃªu ThÃ­ch\rTable favorites {\rfavorite_id varchar(36) [pk]\ruser_id varchar(36) [ref: \u0026gt; users.user_id, not null]\rrecipe_id varchar(36) [ref: \u0026gt; recipes.recipe_id, not null]\rcreated_at timestamp [default: `now()`]\rindexes {\r(user_id, recipe_id) [unique]\ruser_id\r}\r}\r// Káº¿ Hoáº¡ch Bá»¯a Ä‚n\rTable meal_plans {\rplan_id varchar(36) [pk]\ruser_id varchar(36) [ref: \u0026gt; users.user_id, not null]\rplan_name varchar(100)\rstart_date date [not null]\rend_date date [not null]\ris_active boolean [default: true]\rcreated_at timestamp [default: `now()`]\rindexes {\ruser_id\rstart_date\r}\r}\r// Má»¥c Káº¿ Hoáº¡ch Bá»¯a Ä‚n\rTable meal_plan_items {\ritem_id varchar(36) [pk]\rplan_id varchar(36) [ref: \u0026gt; meal_plans.plan_id, not null]\rrecipe_id varchar(36) [ref: \u0026gt; recipes.recipe_id, not null]\rmeal_date date [not null]\rmeal_type enum(\u0026#39;breakfast\u0026#39;, \u0026#39;lunch\u0026#39;, \u0026#39;dinner\u0026#39;, \u0026#39;snack\u0026#39;)\rnotes text\rindexes {\rplan_id\rmeal_date\r}\r}\r// Nháº­t KÃ½ Hoáº¡t Äá»™ng NgÆ°á»i DÃ¹ng\rTable activity_logs {\rlog_id varchar(36) [pk]\ruser_id varchar(36) [ref: \u0026gt; users.user_id, not null]\ractivity_type enum(\u0026#39;login\u0026#39;, \u0026#39;recipe_view\u0026#39;, \u0026#39;recipe_create\u0026#39;, \u0026#39;ai_suggestion\u0026#39;, \u0026#39;ingredient_add\u0026#39;)\ractivity_data json\rip_address varchar(45)\ruser_agent text\rcreated_at timestamp [default: `now()`]\rindexes {\ruser_id\rcreated_at\ractivity_type\r}\r}CÃ´ng Nghá»‡ CÆ¡ Sá»Ÿ Dá»¯ Liá»‡u#\rCÆ¡ Sá»Ÿ Dá»¯ Liá»‡u ChÃ­nh: Amazon DynamoDB (NoSQL)\nKháº£ nÄƒng má»Ÿ rá»™ng cao Äá»™ trá»… tháº¥p Serverless (khÃ´ng cáº§n quáº£n lÃ½ háº¡ táº§ng) Hiá»‡u quáº£ chi phÃ­ cho khá»‘i lÆ°á»£ng cÃ´ng viá»‡c Ä‘á»c nhiá»u PhÆ°Æ¡ng Ãn Thay Tháº¿: Amazon RDS PostgreSQL\nNáº¿u cáº§n cÃ¡c truy váº¥n quan há»‡ phá»©c táº¡p Tá»‘t hÆ¡n cho phÃ¢n tÃ­ch vÃ  bÃ¡o cÃ¡o Máº«u Truy Cáº­p Dá»¯ Liá»‡u#\rMáº«u Truy Cáº­p ChÃ­nh#\rLáº¥y Há»“ SÆ¡ NgÆ°á»i DÃ¹ng: users.user_id â†’ Dá»¯ liá»‡u ngÆ°á»i dÃ¹ng + vai trÃ² Láº¥y TÃ¹y Chá»n NgÆ°á»i DÃ¹ng: user_preferences.user_id â†’ TÃ¹y chá»n Láº¥y NguyÃªn Liá»‡u NgÆ°á»i DÃ¹ng: user_ingredients.user_id â†’ Danh sÃ¡ch nguyÃªn liá»‡u Láº¥y CÃ i Äáº·t Quyá»n RiÃªng TÆ°: privacy_settings.user_id â†’ Cáº¥u hÃ¬nh riÃªng tÆ° Kiá»ƒm Tra Quan Há»‡ Báº¡n BÃ¨: friendships(user_id, friend_id) â†’ Tráº¡ng thÃ¡i báº¡n bÃ¨ Láº¥y Danh SÃ¡ch Báº¡n BÃ¨: friendships.user_id â†’ Táº¥t cáº£ báº¡n bÃ¨ Láº¥y Chi Tiáº¿t CÃ´ng Thá»©c: recipes.recipe_id â†’ CÃ´ng thá»©c + NguyÃªn liá»‡u Láº¥y CÃ´ng Thá»©c NgÆ°á»i DÃ¹ng: recipes.user_id â†’ CÃ´ng thá»©c cá»§a ngÆ°á»i dÃ¹ng (lá»c theo quyá»n riÃªng tÆ°) Láº¥y Gá»£i Ã AI: ai_suggestions.user_id + created_at â†’ Gá»£i Ã½ gáº§n Ä‘Ã¢y Láº¥y YÃªu ThÃ­ch: favorites.user_id â†’ CÃ´ng thá»©c yÃªu thÃ­ch Láº¥y Káº¿ Hoáº¡ch Bá»¯a Ä‚n: meal_plans.user_id + start_date â†’ Káº¿ hoáº¡ch bá»¯a Äƒn Ä‘ang hoáº¡t Ä‘á»™ng Máº«u Thá»© Cáº¥p#\rTÃ¬m kiáº¿m cÃ´ng thá»©c theo mÃ³n Äƒn/phÆ°Æ¡ng phÃ¡p (vá»›i lá»c quyá»n riÃªng tÆ°) Láº¥y cÃ´ng thá»©c cÃ´ng khai phá»• biáº¿n Quáº£n trá»‹: Láº¥y táº¥t cáº£ ngÆ°á»i dÃ¹ng vá»›i bá»™ lá»c vai trÃ² Quáº£n trá»‹: Láº¥y thá»‘ng kÃª ngÆ°á»i dÃ¹ng Truy váº¥n phÃ¢n tÃ­ch (nháº­t kÃ½ hoáº¡t Ä‘á»™ng) Thiáº¿t Káº¿ Báº£ng DynamoDB (Máº«u Báº£ng ÄÆ¡n)#\rBáº£ng ChÃ­nh: smart-cooking-data#\rNgÆ°á»i DÃ¹ng#\rPK: USER#\u0026lt;user_id\u0026gt; SK: PROFILE Thuá»™c tÃ­nh: email, username, full_name, role, is_active, v.v. GSI1PK: ROLE#\u0026lt;role\u0026gt; (cho truy váº¥n quáº£n trá»‹) TÃ¹y Chá»n NgÆ°á»i DÃ¹ng#\rPK: USER#\u0026lt;user_id\u0026gt; SK: PREFERENCES Thuá»™c tÃ­nh: dietary_restrictions, allergies, favorite_cuisines, v.v. CÃ i Äáº·t Quyá»n RiÃªng TÆ°#\rPK: USER#\u0026lt;user_id\u0026gt; SK: PRIVACY Thuá»™c tÃ­nh: profile_visibility, email_visibility, v.v. NguyÃªn Liá»‡u NgÆ°á»i DÃ¹ng#\rPK: USER#\u0026lt;user_id\u0026gt; SK: INGREDIENT#\u0026lt;ingredient_name\u0026gt; Thuá»™c tÃ­nh: category, added_at Quan Há»‡ Báº¡n BÃ¨#\rPK: USER#\u0026lt;user_id\u0026gt; SK: FRIEND#\u0026lt;friend_id\u0026gt; Thuá»™c tÃ­nh: status, requested_at, responded_at GSI1PK: USER#\u0026lt;friend_id\u0026gt; (Ä‘á»ƒ tra cá»©u ngÆ°á»£c) GSI1SK: FRIEND#\u0026lt;user_id\u0026gt; CÃ´ng Thá»©c#\rPK: RECIPE#\u0026lt;recipe_id\u0026gt; SK: METADATA Thuá»™c tÃ­nh: title, description, cuisine_type, difficulty, v.v. GSI1PK: USER#\u0026lt;user_id\u0026gt; (cÃ´ng thá»©c cá»§a ngÆ°á»i dÃ¹ng) GSI1SK: RECIPE#\u0026lt;created_at\u0026gt; NguyÃªn Liá»‡u CÃ´ng Thá»©c#\rPK: RECIPE#\u0026lt;recipe_id\u0026gt; SK: INGREDIENT#\u0026lt;number\u0026gt; Thuá»™c tÃ­nh: ingredient_name, quantity, unit Gá»£i Ã AI#\rPK: USER#\u0026lt;user_id\u0026gt; SK: SUGGESTION#\u0026lt;timestamp\u0026gt; Thuá»™c tÃ­nh: recipe_id, prompt_text, ai_response, was_accepted YÃªu ThÃ­ch#\rPK: USER#\u0026lt;user_id\u0026gt; SK: FAVORITE#\u0026lt;recipe_id\u0026gt; Thuá»™c tÃ­nh: created_at Chá»‰ Má»¥c Thá»© Cáº¥p ToÃ n Cá»¥c (GSI)#\rGSI1: Truy váº¥n dá»±a trÃªn ngÆ°á»i dÃ¹ng\nPK: GSI1PK (vÃ­ dá»¥: ROLE#admin, USER#\u0026lt;user_id\u0026gt;) SK: GSI1SK (vÃ­ dá»¥: timestamp, RECIPE#\u0026lt;created_at\u0026gt;) TrÆ°á»ng há»£p sá»­ dá»¥ng: Láº¥y táº¥t cáº£ quáº£n trá»‹ viÃªn Láº¥y cÃ´ng thá»©c cá»§a ngÆ°á»i dÃ¹ng sáº¯p xáº¿p theo ngÃ y Láº¥y quan há»‡ báº¡n bÃ¨ (tra cá»©u ngÆ°á»£c) GSI2: TÃ¬m kiáº¿m \u0026amp; khÃ¡m phÃ¡ cÃ´ng thá»©c\nPK: GSI2PK (vÃ­ dá»¥: CUISINE#\u0026lt;type\u0026gt;, METHOD#\u0026lt;type\u0026gt;) SK: GSI2SK (vÃ­ dá»¥: RECIPE#\u0026lt;created_at\u0026gt;) TrÆ°á»ng há»£p sá»­ dá»¥ng: TÃ¬m kiáº¿m cÃ´ng thá»©c theo mÃ³n Äƒn TÃ¬m kiáº¿m cÃ´ng thá»©c theo phÆ°Æ¡ng phÃ¡p náº¥u Láº¥y cÃ´ng thá»©c phá»• biáº¿n Æ¯á»›c TÃ­nh Dung LÆ°á»£ng LÆ°u Trá»¯ \u0026amp; Chi PhÃ­#\rGiáº£ Äá»‹nh#\r1.000 ngÆ°á»i dÃ¹ng hoáº¡t Ä‘á»™ng Trung bÃ¬nh 20 nguyÃªn liá»‡u má»—i ngÆ°á»i dÃ¹ng Trung bÃ¬nh 5 cÃ´ng thá»©c Ä‘Ã£ lÆ°u má»—i ngÆ°á»i dÃ¹ng Trung bÃ¬nh 10 gá»£i Ã½ AI má»—i ngÆ°á»i dÃ¹ng má»—i thÃ¡ng Æ¯á»›c TÃ­nh Dung LÆ°á»£ng#\rNgÆ°á»i dÃ¹ng: 1.000 Ã— 1KB = 1MB NguyÃªn liá»‡u ngÆ°á»i dÃ¹ng: 1.000 Ã— 20 Ã— 0.5KB = 10MB CÃ´ng thá»©c: 5.000 Ã— 5KB = 25MB Gá»£i Ã½ AI: 10.000 Ã— 2KB = 20MB Tá»•ng cá»™ng: ~60MB Chi PhÃ­ DynamoDB (HÃ ng ThÃ¡ng)#\rLÆ°u trá»¯: 60MB Ã— $0.25/GB = ~$0.02 Kháº£ nÄƒng Ä‘á»c: ~$5-10 Kháº£ nÄƒng ghi: ~$5-10 Tá»•ng cá»™ng: ~$10-20/thÃ¡ng "},{"id":4,"href":"/docs/summary/cost-analysis/","title":"PhÃ¢n TÃ­ch Chi PhÃ­","section":"Summary","content":"PHÃ‚N TÃCH CHI PHÃ Dá»° ÃN#\r   Chi PhÃ­ HÃ ng ThÃ¡ng (1,000 users)#\rDá»‹ch Vá»¥ Chi PhÃ­ Æ¯á»›c TÃ­nh Ghi ChÃº AWS Amplify $15 Hosting Next.js + CI/CD Amazon CloudFront $8 CDN, 1TB data transfer Amazon API Gateway $5 ~100K requests/thÃ¡ng AWS Lambda Functions $15 6 Lambda functions Amazon Bedrock (Sonnet) $40 Claude 3.5 Sonnet Amazon Bedrock (Haiku) $5 Claude 3 Haiku (tiáº¿t kiá»‡m) Amazon DynamoDB $15 On-demand pricing Amazon S3 $5 50GB storage Amazon Cognito FREE \u0026lt; 50,000 Amazon CloudWatch $8 Logs \u0026amp; Metrics AWS WAF $6 Web Application Firewall AWS Secrets Manager $2 API keys storage Tá»•ng Chi PhÃ­#\rKá»‹ch Báº£n Chi PhÃ­/ThÃ¡ng Sá»­ dá»¥ng Claude Sonnet ~$119 Sá»­ dá»¥ng Claude Haiku ~$84    Khuyáº¿n nghá»‹: Sá»­ dá»¥ng Claude 3 Haiku Ä‘á»ƒ tiáº¿t kiá»‡m 70% chi phÃ­ AI (~$35/thÃ¡ng)\n   PhÃ¢n TÃ­ch Chi PhÃ­ Theo Quy MÃ´#\rKá»‹ch Báº£n 1: MVP (1,000 users)#\rChi phÃ­: $84-119/thÃ¡ng Chi phÃ­/user: $0.084-0.119/thÃ¡ng Doanh thu cáº§n: $300-400/thÃ¡ng (ROI 3-4x) Ká»‹ch Báº£n 2: TÄƒng TrÆ°á»Ÿng (10,000 users)#\rChi phÃ­: $200-300/thÃ¡ng Chi phÃ­/user: $0.020-0.030/thÃ¡ng Doanh thu cáº§n: $800-1,200/thÃ¡ng Ká»‹ch Báº£n 3: Scale (100,000 users)#\rChi phÃ­: $1,000-1,500/thÃ¡ng Chi phÃ­/user: $0.010-0.015/thÃ¡ng Doanh thu cáº§n: $4,000-6,000/thÃ¡ng    Chiáº¿n LÆ°á»£c Tá»‘i Æ¯u Chi PhÃ­#\r1. AI/ML Costs (40-50% tá»•ng chi phÃ­)#\râœ… Sá»­ dá»¥ng Claude 3 Haiku thay vÃ¬ Sonnet â†’ Tiáº¿t kiá»‡m $35/thÃ¡ng (70%) âœ… Cache AI responses vá»›i recipe_cache table â†’ Giáº£m 30-40% AI calls âœ… Prompt optimization â†’ Giáº£m token usage 20% âœ… Rate limiting â†’ NgÄƒn abuse Tiáº¿t kiá»‡m Æ°á»›c tÃ­nh: $40-50/thÃ¡ng\n2. Database Costs (15-20% tá»•ng chi phÃ­)#\râœ… DynamoDB on-demand â†’ Chá»‰ tráº£ khi sá»­ dá»¥ng âœ… TTL cho old AI suggestions â†’ Giáº£m storage âœ… Batch operations â†’ Giáº£m write units âœ… Compression cho JSON fields â†’ Giáº£m storage 30% Tiáº¿t kiá»‡m Æ°á»›c tÃ­nh: $5-10/thÃ¡ng\n3. CDN \u0026amp; Hosting (15-20% tá»•ng chi phÃ­)#\râœ… CloudFront caching â†’ Giáº£m origin requests âœ… Image optimization â†’ Giáº£m bandwidth âœ… Gzip compression â†’ Giáº£m 60% transfer size âœ… Lazy loading â†’ Giáº£m initial load Tiáº¿t kiá»‡m Æ°á»›c tÃ­nh: $5-8/thÃ¡ng\n4. Lambda Costs (10-15% tá»•ng chi phÃ­)#\râœ… Reserved concurrency â†’ NgÄƒn runaway costs âœ… Memory optimization â†’ Giáº£m execution cost âœ… Connection pooling â†’ Giáº£m cold starts âœ… Code minification â†’ Giáº£m package size Tiáº¿t kiá»‡m Æ°á»›c tÃ­nh: $3-5/thÃ¡ng\n5. Storage Costs (5-10% tá»•ng chi phÃ­)#\râœ… S3 Intelligent-Tiering â†’ Auto-optimize âœ… Lifecycle policies â†’ XÃ³a temp files sau 90 ngÃ y âœ… Image compression â†’ WebP format âœ… Thumbnail generation â†’ Giáº£m storage Tiáº¿t kiá»‡m Æ°á»›c tÃ­nh: $2-3/thÃ¡ng\n   Chi PhÃ­ Dá»± Kiáº¿n Theo Thá»i Gian#\rNÄƒm 1#\rThÃ¡ng Users Chi PhÃ­ Revenue Target 1-3 100 $60 $200 (Beta) 4-6 500 $75 $250 7-9 1,500 $100 $400 10-12 3,000 $150 $600 NÄƒm 2#\rQuarter Users Chi PhÃ­ Revenue Target Q1 5,000 $180 $800 Q2 8,000 $220 $1,200 Q3 12,000 $280 $1,800 Q4 20,000 $400 $3,000    Break-Even Analysis#\rMÃ´ HÃ¬nh Freemium#\rFree tier: Giá»›i háº¡n 10 AI suggestions/thÃ¡ng Premium tier: $4.99/thÃ¡ng (unlimited) Conversion rate target: 5% ThÃ¡ng 1-3 (1,000 users)#\rPremium users: 50 (5%) Revenue: $250/thÃ¡ng Cost: $84/thÃ¡ng Profit: $166/thÃ¡ng âœ… ThÃ¡ng 12 (10,000 users)#\rPremium users: 500 (5%) Revenue: $2,500/thÃ¡ng Cost: $250/thÃ¡ng Profit: $2,250/thÃ¡ng âœ… MÃ´ HÃ¬nh Ads (Alternative)#\rAd revenue: $0.50-1.00/user/thÃ¡ng 1,000 users = $500-1,000/thÃ¡ng Cost: $84/thÃ¡ng Profit: $416-916/thÃ¡ng âœ…    Chi PhÃ­ Báº£o Máº­t \u0026amp; Compliance#\rItem Chi PhÃ­/ThÃ¡ng AWS WAF $6 AWS Secrets Manager $2 SSL/TLS Certificates FREE (ACM) DDoS Protection (Shield Standard) FREE Encryption at Rest FREE CloudWatch Alarms $1 Total $9    Chi PhÃ­ TÄƒng TrÆ°á»Ÿng Dá»± Kiáº¿n#\rMarketing \u0026amp; Growth (NgoÃ i AWS)#\rMarketing: $500-1,000/thÃ¡ng (Facebook Ads, Google Ads) Support: $200-500/thÃ¡ng (Zendesk/Intercom) Analytics: $50-100/thÃ¡ng (Mixpanel/Amplitude) Payment Processing: 2.9% + $0.30/transaction (Stripe) Total Operating Costs (ThÃ¡ng 12)#\rAWS Infrastructure: $150 Marketing: $800 Support: $300 Analytics: $75 Payment Processing: $75 (3% Ã— $2,500) Total: $1,400/thÃ¡ng    ROI Projection#\rYear 1#\rTotal Investment: $10,000 (dev) + $1,500 (AWS) = $11,500 Revenue Year 1: $18,000 (average $1,500/thÃ¡ng) ROI: 56% âœ… Year 2#\rTotal Investment: $5,000 (maintenance) + $3,500 (AWS) Revenue Year 2: $60,000 (average $5,000/thÃ¡ng) ROI: 600% âœ…âœ…    Khuyáº¿n Nghá»‹ Cuá»‘i CÃ¹ng#\rGiai Äoáº¡n MVP (0-3 thÃ¡ng)#\râœ… Sá»­ dá»¥ng Claude 3 Haiku (tiáº¿t kiá»‡m $35/thÃ¡ng) âœ… Implement recipe cache (giáº£m 30% AI calls) âœ… Enable CloudFront caching (giáº£m bandwidth) âœ… Set billing alarms táº¡i $100, $150, $200 Chi phÃ­ target: $60-80/thÃ¡ng\nGiai Äoáº¡n Growth (4-12 thÃ¡ng)#\râœ… Monitor \u0026amp; optimize dá»±a trÃªn usage patterns âœ… Scale DynamoDB capacity dáº§n dáº§n âœ… Consider Reserved Instances khi stable âœ… Implement advanced caching strategies Chi phÃ­ target: $100-300/thÃ¡ng\nGiai Äoáº¡n Scale (Year 2+)#\râœ… Negotiate Enterprise Pricing vá»›i AWS âœ… Consider Savings Plans (20-40% discount) âœ… Optimize architecture dá»±a trÃªn real data âœ… Automate cost monitoring \u0026amp; alerts Chi phÃ­ target: \u0026lt; $0.02/user/thÃ¡ng\n"}]